{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"eptr2","text":"<p>eptr2 is a Python client for EPIAS Transparency Platform v2.0 - the official Turkish electricity market data platform.</p> <p>Live Demo</p> <p>Try the live demo at https://eptr2demo.streamlit.app/</p>"},{"location":"#features","title":"Features","text":"<ul> <li>\ud83d\udd0c 213+ API Endpoints - Access comprehensive Turkish electricity market data</li> <li>\ud83d\udcca Pandas Integration - Returns data as DataFrames for easy analysis</li> <li>\ud83e\udd16 AI Agent Ready - Built-in MCP server for Claude and other AI assistants</li> <li>\ud83d\udd11 Easy Authentication - Simple credential management with <code>.env</code> files</li> <li>\u267b\ufe0f TGT Recycling - Automatic ticket management for efficient API calls</li> <li>\ud83d\udcc8 Composite Functions - Pre-built functions for common data analysis tasks</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>from eptr2 import EPTR2\n\n# Initialize with credentials\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Get Market Clearing Price (MCP/PTF)\ndf = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\nprint(df)\n</code></pre>"},{"location":"#what-data-is-available","title":"What Data is Available?","text":"<p>eptr2 provides access to various Turkish electricity market data:</p> Category Description Example Calls Prices Market clearing, system marginal, imbalance prices <code>mcp</code>, <code>smp</code>, <code>imbalance-price</code> Consumption Real-time consumption, load forecasts <code>rt-consumption</code>, <code>load-plan</code> Generation Real-time generation by source type <code>rt-generation</code>, <code>uevm</code> Market Operations Day-ahead, intraday market data <code>dpp</code>, <code>kgup</code>"},{"location":"#installation","title":"Installation","text":"pipuv <pre><code>pip install \"eptr2[allextras]\"\n</code></pre> <pre><code>uv pip install \"eptr2[allextras]\"\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li> <p> Getting Started</p> <p>Set up authentication and make your first API call</p> <p> Quick Start</p> </li> <li> <p> API Reference</p> <p>Explore the full API documentation</p> <p> API Reference</p> </li> <li> <p> AI Integration</p> <p>Use eptr2 with Claude and other AI assistants</p> <p> MCP Server</p> </li> <li> <p> Composite Functions</p> <p>Pre-built functions for common analysis tasks</p> <p> Composite Functions</p> </li> </ul>"},{"location":"#license","title":"License","text":"<p>eptr2 is licensed under the Apache License 2.0.</p>"},{"location":"CONTRIBUTING/","title":"Documentation","text":"<p>This directory contains the MkDocs documentation for eptr2.</p>"},{"location":"CONTRIBUTING/#building-locally","title":"Building Locally","text":""},{"location":"CONTRIBUTING/#install-dependencies","title":"Install dependencies","text":"<pre><code>pip install \"eptr2[docs]\"\n# or\npip install mkdocs-material mkdocstrings[python] mkdocs-autorefs\n</code></pre>"},{"location":"CONTRIBUTING/#serve-locally","title":"Serve locally","text":"<pre><code>mkdocs serve\n</code></pre> <p>Visit <code>http://localhost:8000</code> to preview the documentation.</p>"},{"location":"CONTRIBUTING/#build-static-site","title":"Build static site","text":"<pre><code>mkdocs build\n</code></pre> <p>The static site will be generated in the <code>site/</code> directory.</p>"},{"location":"CONTRIBUTING/#deployment","title":"Deployment","text":"<p>Documentation is automatically deployed to GitHub Pages when changes are pushed to the <code>main</code> branch.</p> <p>The deployment workflow is defined in <code>.github/workflows/docs.yml</code>.</p>"},{"location":"CONTRIBUTING/#manual-deployment","title":"Manual deployment","text":"<pre><code>mkdocs gh-deploy\n</code></pre>"},{"location":"CONTRIBUTING/#structure","title":"Structure","text":"<pre><code>docs/\n\u251c\u2500\u2500 index.md                    # Homepage\n\u251c\u2500\u2500 getting-started/            # Getting started guides\n\u2502   \u251c\u2500\u2500 installation.md\n\u2502   \u251c\u2500\u2500 authentication.md\n\u2502   \u2514\u2500\u2500 quickstart.md\n\u251c\u2500\u2500 user-guide/                 # User guides\n\u2502   \u251c\u2500\u2500 basic-usage.md\n\u2502   \u251c\u2500\u2500 api-calls.md\n\u2502   \u251c\u2500\u2500 composite-functions.md\n\u2502   \u2514\u2500\u2500 dataframes.md\n\u251c\u2500\u2500 ai-integration/             # AI integration docs\n\u2502   \u251c\u2500\u2500 mcp-server.md\n\u2502   \u251c\u2500\u2500 claude-desktop.md\n\u2502   \u2514\u2500\u2500 agent-skills.md\n\u251c\u2500\u2500 api/                        # API reference\n\u2502   \u251c\u2500\u2500 eptr2.md\n\u2502   \u251c\u2500\u2500 main.md\n\u2502   \u251c\u2500\u2500 composite.md\n\u2502   \u251c\u2500\u2500 mcp.md\n\u2502   \u2514\u2500\u2500 util.md\n\u251c\u2500\u2500 tutorials/                  # Tutorials\n\u2502   \u251c\u2500\u2500 demo-app.md\n\u2502   \u2514\u2500\u2500 calculator.md\n\u251c\u2500\u2500 reference/                  # Reference docs\n\u2502   \u251c\u2500\u2500 abbreviations.md\n\u2502   \u251c\u2500\u2500 changelog.md\n\u2502   \u2514\u2500\u2500 contributing.md\n\u251c\u2500\u2500 assets/                     # Static assets\n\u2502   \u2514\u2500\u2500 README.md\n\u251c\u2500\u2500 stylesheets/                # Custom CSS\n\u2502   \u2514\u2500\u2500 extra.css\n\u251c\u2500\u2500 javascripts/                # Custom JS\n\u2502   \u2514\u2500\u2500 mathjax.js\n\u2514\u2500\u2500 includes/                   # Included snippets\n    \u2514\u2500\u2500 abbreviations.md\n</code></pre>"},{"location":"CONTRIBUTING/#adding-new-pages","title":"Adding New Pages","text":"<ol> <li>Create a new <code>.md</code> file in the appropriate directory</li> <li>Add the page to the <code>nav</code> section in <code>mkdocs.yml</code></li> <li>Use consistent formatting and structure</li> </ol>"},{"location":"CONTRIBUTING/#writing-documentation","title":"Writing Documentation","text":""},{"location":"CONTRIBUTING/#style-guide","title":"Style Guide","text":"<ul> <li>Use clear, concise language</li> <li>Include code examples</li> <li>Add cross-references to related pages</li> <li>Use admonitions for tips, warnings, etc.</li> </ul>"},{"location":"CONTRIBUTING/#admonitions","title":"Admonitions","text":"<pre><code>!!! note \"Title\"\n    Note content\n\n!!! tip \"Tip\"\n    Tip content\n\n!!! warning \"Warning\"\n    Warning content\n</code></pre>"},{"location":"CONTRIBUTING/#code-blocks","title":"Code Blocks","text":"<p><pre><code>```python\nfrom eptr2 import EPTR2\neptr = EPTR2(use_dotenv=True)\n</code></pre> <pre><code>### API Documentation\n\nUse mkdocstrings to generate API docs from docstrings:\n\n```markdown\n::: eptr2.main.EPTR2\n    options:\n      show_root_heading: true\n      show_source: true\n</code></pre></p>"},{"location":"ai-integration/agent-skills/","title":"Agent Skills","text":"<p>eptr2 includes Claude Agent Skills that provide specialized guidance for different types of electricity market data queries.</p>"},{"location":"ai-integration/agent-skills/#what-are-agent-skills","title":"What are Agent Skills?","text":"<p>Agent Skills are structured knowledge files that help Claude understand domain-specific concepts and provide better assistance. When you ask about electricity prices, consumption, or generation, Claude automatically loads the relevant skill.</p>"},{"location":"ai-integration/agent-skills/#available-skills","title":"Available Skills","text":"Skill Triggers On Use Case eptr2-price-analysis PTF, SMF, MCP, SMP, electricity prices Price queries and analysis eptr2-consumption-data UECM, load plan, demand forecast Consumption tracking eptr2-generation-tracking UEVM, generation, renewables Generation monitoring eptr2-imbalance-costs KUPST, imbalance, deviation costs Imbalance calculations eptr2-market-operations G\u00d6P, G\u0130P, DGP, market orders Market operations data eptr2-api-discovery Available endpoints, API search Finding the right API"},{"location":"ai-integration/agent-skills/#how-skills-work","title":"How Skills Work","text":"<p>Skills are automatically invoked based on your query:</p> Your Question Skill Triggered \"What are today's electricity prices?\" eptr2-price-analysis \"Show me wind generation data\" eptr2-generation-tracking \"Calculate imbalance costs for my portfolio\" eptr2-imbalance-costs \"What APIs are available for market data?\" eptr2-api-discovery"},{"location":"ai-integration/agent-skills/#skill-details","title":"Skill Details","text":""},{"location":"ai-integration/agent-skills/#eptr2-price-analysis","title":"eptr2-price-analysis","text":"<p>Covers: - Market Clearing Price (MCP/PTF) - System Marginal Price (SMP/SMF) - Weighted Average Price (WAP/AOF) - Intraday market prices - Price comparisons and spreads</p> <p>Example queries: - \"What was the average MCP for July 2024?\" - \"Compare PTF and SMF for the last week\" - \"Show hourly price distribution\"</p>"},{"location":"ai-integration/agent-skills/#eptr2-consumption-data","title":"eptr2-consumption-data","text":"<p>Covers: - Real-time consumption - Settlement consumption (UECM) - Load plan forecasts - Consumption patterns</p> <p>Example queries: - \"What's the current electricity consumption?\" - \"Compare forecast vs actual consumption\" - \"Show consumption trends by hour\"</p>"},{"location":"ai-integration/agent-skills/#eptr2-generation-tracking","title":"eptr2-generation-tracking","text":"<p>Covers: - Real-time generation by source - Settlement generation (UEVM) - Renewable energy output - Plant-level production</p> <p>Example queries: - \"How much solar generation right now?\" - \"Show wind generation for the past month\" - \"What's the generation mix?\"</p>"},{"location":"ai-integration/agent-skills/#eptr2-imbalance-costs","title":"eptr2-imbalance-costs","text":"<p>Covers: - Imbalance price calculations - KUPST (deviation costs) - Energy surplus/deficit penalties - DSG tolerance calculations</p> <p>Example queries: - \"Calculate imbalance cost for 100 MWh deficit\" - \"What's the KUPST for yesterday?\" - \"Explain imbalance pricing mechanism\"</p>"},{"location":"ai-integration/agent-skills/#eptr2-market-operations","title":"eptr2-market-operations","text":"<p>Covers: - Day-Ahead Market (G\u00d6P) operations - Intraday Market (G\u0130P) trading - Balancing Power Market (DGP) - Order books and volumes</p> <p>Example queries: - \"Show G\u00d6P clearing quantities\" - \"What's the G\u0130P trading volume today?\" - \"Explain YAL and YAT instructions\"</p>"},{"location":"ai-integration/agent-skills/#eptr2-api-discovery","title":"eptr2-api-discovery","text":"<p>Covers: - Finding available endpoints - Understanding API categories - Parameter requirements - Call aliases</p> <p>Example queries: - \"What APIs are available for price data?\" - \"How do I get power plant information?\" - \"List all consumption-related endpoints\"</p>"},{"location":"ai-integration/agent-skills/#installing-skills-personally","title":"Installing Skills Personally","text":"<p>To use skills across all your projects, copy to your personal skills directory:</p> macOS/LinuxWindows <pre><code>cp -r .claude/skills/* ~/.claude/skills/\n</code></pre> <pre><code>xcopy /E /I .claude\\skills %USERPROFILE%\\.claude\\skills\n</code></pre>"},{"location":"ai-integration/agent-skills/#skill-files-location","title":"Skill Files Location","text":"<p>In the eptr2 repository, skills are located at:</p> <pre><code>.claude/skills/\n\u251c\u2500\u2500 eptr2-price-analysis/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u251c\u2500\u2500 eptr2-consumption-data/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u251c\u2500\u2500 eptr2-generation-tracking/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u251c\u2500\u2500 eptr2-imbalance-costs/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u251c\u2500\u2500 eptr2-market-operations/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u2514\u2500\u2500 eptr2-api-discovery/\n    \u2514\u2500\u2500 SKILL.md\n</code></pre>"},{"location":"ai-integration/agent-skills/#creating-custom-skills","title":"Creating Custom Skills","text":"<p>You can create custom skills for your specific use cases:</p> <ol> <li>Create a directory under <code>.claude/skills/</code></li> <li>Add a <code>SKILL.md</code> file with:</li> <li>Skill description</li> <li>Trigger keywords</li> <li>Domain knowledge</li> <li>Example patterns</li> </ol> <p>Example structure:</p> <pre><code># My Custom Skill\n\n## Description\nThis skill helps with [specific use case].\n\n## Triggers\n- keyword1\n- keyword2\n\n## Knowledge\n[Domain-specific information]\n\n## Examples\n- \"Example query 1\" \u2192 [Expected behavior]\n- \"Example query 2\" \u2192 [Expected behavior]\n</code></pre>"},{"location":"ai-integration/agent-skills/#best-practices","title":"Best Practices","text":"<ol> <li>Be specific - Detailed queries trigger more accurate skill matching</li> <li>Use Turkish terms - Skills recognize both English and Turkish terminology</li> <li>Combine skills - Complex queries may utilize multiple skills</li> <li>Iterate - Follow up with clarifying questions for best results</li> </ol>"},{"location":"ai-integration/agent-skills/#next-steps","title":"Next Steps","text":"<ul> <li>MCP Server Setup</li> <li>Claude Desktop Setup</li> </ul>"},{"location":"ai-integration/claude-desktop/","title":"Claude Desktop Setup","text":"<p>This guide walks you through setting up eptr2 with Claude Desktop for direct electricity market data access.</p>"},{"location":"ai-integration/claude-desktop/#prerequisites","title":"Prerequisites","text":"<ol> <li>Claude Desktop installed</li> <li>eptr2 installed with MCP support:    <pre><code>pip install \"eptr2[allextras]\"\n</code></pre></li> <li>EPIAS Transparency Platform credentials</li> </ol>"},{"location":"ai-integration/claude-desktop/#configuration","title":"Configuration","text":""},{"location":"ai-integration/claude-desktop/#step-1-locate-config-file","title":"Step 1: Locate Config File","text":"<p>Find your Claude Desktop configuration file:</p> macOSWindowsLinux <pre><code>~/Library/Application Support/Claude/claude_desktop_config.json\n</code></pre> <pre><code>%APPDATA%\\Claude\\claude_desktop_config.json\n</code></pre> <pre><code>~/.config/Claude/claude_desktop_config.json\n</code></pre>"},{"location":"ai-integration/claude-desktop/#step-2-add-eptr2-server","title":"Step 2: Add eptr2 Server","text":"<p>Edit <code>claude_desktop_config.json</code> to add the eptr2 MCP server:</p> <pre><code>{\n  \"mcpServers\": {\n    \"eptr2\": {\n      \"command\": \"eptr2-mcp-server\",\n      \"env\": {\n        \"EPTR_USERNAME\": \"your.email@example.com\",\n        \"EPTR_PASSWORD\": \"yourpassword\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"ai-integration/claude-desktop/#alternative-using-uv","title":"Alternative: Using UV","text":"<p>If you're using UV for package management:</p> <pre><code>{\n  \"mcpServers\": {\n    \"eptr2\": {\n      \"command\": \"uv\",\n      \"args\": [\n        \"run\",\n        \"--extra\", \"mcp\",\n        \"eptr2-mcp-server\"\n      ],\n      \"env\": {\n        \"EPTR_USERNAME\": \"your.email@example.com\",\n        \"EPTR_PASSWORD\": \"yourpassword\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"ai-integration/claude-desktop/#alternative-using-python-module","title":"Alternative: Using Python Module","text":"<pre><code>{\n  \"mcpServers\": {\n    \"eptr2\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"eptr2.mcp.server\"],\n      \"env\": {\n        \"EPTR_USERNAME\": \"your.email@example.com\",\n        \"EPTR_PASSWORD\": \"yourpassword\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"ai-integration/claude-desktop/#step-3-restart-claude-desktop","title":"Step 3: Restart Claude Desktop","text":"<p>Close and reopen Claude Desktop to load the new configuration.</p>"},{"location":"ai-integration/claude-desktop/#verification","title":"Verification","text":""},{"location":"ai-integration/claude-desktop/#check-server-status","title":"Check Server Status","text":"<p>In Claude Desktop, you should see the eptr2 tools available. Try asking:</p> <p>\"What MCP tools do you have available for Turkish electricity market data?\"</p> <p>Claude should list the eptr2 tools.</p>"},{"location":"ai-integration/claude-desktop/#test-a-query","title":"Test a Query","text":"<p>Ask Claude:</p> <p>\"What are today's electricity prices in Turkey?\"</p> <p>Claude will use the <code>get_market_clearing_price</code> tool to fetch the data.</p>"},{"location":"ai-integration/claude-desktop/#example-conversations","title":"Example Conversations","text":""},{"location":"ai-integration/claude-desktop/#price-analysis","title":"Price Analysis","text":"<p>You: What were the electricity prices in Turkey on July 29, 2024?</p> <p>Claude: I'll fetch the market clearing prices for that date... [Uses get_market_clearing_price tool]</p> <p>The Market Clearing Price (MCP/PTF) on July 29, 2024 ranged from...</p>"},{"location":"ai-integration/claude-desktop/#consumption-data","title":"Consumption Data","text":"<p>You: Show me Turkey's real-time electricity consumption for the past week.</p> <p>Claude: I'll get the real-time consumption data... [Uses get_real_time_consumption tool]</p> <p>Here's the hourly consumption data for the past week...</p>"},{"location":"ai-integration/claude-desktop/#generation-mix","title":"Generation Mix","text":"<p>You: What's the current generation mix in Turkey? How much comes from renewables?</p> <p>Claude: Let me fetch the real-time generation data by source... [Uses get_real_time_generation tool]</p> <p>Currently, Turkey's electricity generation mix is...</p>"},{"location":"ai-integration/claude-desktop/#complex-analysis","title":"Complex Analysis","text":"<p>You: Compare the MCP and SMP for July 2024 and tell me about any patterns.</p> <p>Claude: I'll fetch both price series and analyze them... [Uses multiple tools]</p> <p>Here's my analysis of the MCP and SMP comparison...</p>"},{"location":"ai-integration/claude-desktop/#troubleshooting","title":"Troubleshooting","text":""},{"location":"ai-integration/claude-desktop/#server-not-starting","title":"Server Not Starting","text":"<ol> <li> <p>Verify eptr2 is installed:    <pre><code>pip show eptr2\n</code></pre></p> </li> <li> <p>Test the server manually:    <pre><code>EPTR_USERNAME=... EPTR_PASSWORD=... eptr2-mcp-server\n</code></pre></p> </li> <li> <p>Check the Claude Desktop logs for errors</p> </li> </ol>"},{"location":"ai-integration/claude-desktop/#authentication-errors","title":"Authentication Errors","text":"<ol> <li>Verify credentials are correct</li> <li>Test credentials with direct Python:    <pre><code>from eptr2 import EPTR2\neptr = EPTR2(username=\"...\", password=\"...\")\nprint(eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\"))\n</code></pre></li> </ol>"},{"location":"ai-integration/claude-desktop/#tools-not-appearing","title":"Tools Not Appearing","text":"<ol> <li>Restart Claude Desktop</li> <li>Check JSON syntax in config file</li> <li>Verify the command path is correct</li> </ol>"},{"location":"ai-integration/claude-desktop/#slow-responses","title":"Slow Responses","text":"<ol> <li>Enable TGT recycling to reduce authentication overhead</li> <li>Check your network connection to EPIAS servers</li> </ol>"},{"location":"ai-integration/claude-desktop/#security-notes","title":"Security Notes","text":"<p>Credential Security</p> <p>The configuration file stores credentials in plain text. Consider:</p> <ul> <li>Setting appropriate file permissions</li> <li>Using environment variables from a <code>.env</code> file</li> <li>Not sharing your configuration file</li> </ul>"},{"location":"ai-integration/claude-desktop/#using-env-file-instead","title":"Using .env File Instead","text":"<p>Create a wrapper script that loads from <code>.env</code>:</p> <pre><code>#!/bin/bash\n# eptr2-mcp-wrapper.sh\nsource /path/to/.env\nexec eptr2-mcp-server\n</code></pre> <p>Then in config:</p> <pre><code>{\n  \"mcpServers\": {\n    \"eptr2\": {\n      \"command\": \"/path/to/eptr2-mcp-wrapper.sh\"\n    }\n  }\n}\n</code></pre>"},{"location":"ai-integration/claude-desktop/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"ai-integration/claude-desktop/#multiple-servers","title":"Multiple Servers","text":"<p>You can run multiple MCP servers alongside eptr2:</p> <pre><code>{\n  \"mcpServers\": {\n    \"eptr2\": {\n      \"command\": \"eptr2-mcp-server\",\n      \"env\": {...}\n    },\n    \"other-server\": {\n      \"command\": \"other-mcp-server\"\n    }\n  }\n}\n</code></pre>"},{"location":"ai-integration/claude-desktop/#custom-settings","title":"Custom Settings","text":"<pre><code>{\n  \"mcpServers\": {\n    \"eptr2\": {\n      \"command\": \"python\",\n      \"args\": [\n        \"-c\",\n        \"from eptr2.mcp import run_mcp_server; import asyncio; asyncio.run(run_mcp_server(recycle_tgt=True))\"\n      ],\n      \"env\": {\n        \"EPTR_USERNAME\": \"...\",\n        \"EPTR_PASSWORD\": \"...\",\n        \"EPTR_TGT_PATH\": \"/custom/path\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"ai-integration/claude-desktop/#next-steps","title":"Next Steps","text":"<ul> <li>Agent Skills</li> <li>MCP Server Reference</li> </ul>"},{"location":"ai-integration/mcp-server/","title":"MCP Server","text":"<p>eptr2 includes a Model Context Protocol (MCP) server that enables AI assistants like Claude to directly query Turkish electricity market data.</p>"},{"location":"ai-integration/mcp-server/#what-is-mcp","title":"What is MCP?","text":"<p>The Model Context Protocol (MCP) is a standard for connecting AI assistants to external data sources and tools. With eptr2's MCP server, AI assistants can:</p> <ul> <li>Query real-time electricity prices</li> <li>Fetch consumption and generation data</li> <li>Access all 213+ API endpoints</li> <li>Perform complex market analysis</li> </ul>"},{"location":"ai-integration/mcp-server/#quick-start","title":"Quick Start","text":""},{"location":"ai-integration/mcp-server/#installation","title":"Installation","text":"<p>Install eptr2 with MCP support:</p> <pre><code>pip install \"eptr2[allextras]\"\n</code></pre>"},{"location":"ai-integration/mcp-server/#running-the-server","title":"Running the Server","text":"<p>From command line:</p> <pre><code>eptr2-mcp-server\n</code></pre> <p>Or programmatically:</p> <pre><code>from eptr2.mcp import run_mcp_server\nimport asyncio\n\nasyncio.run(run_mcp_server(use_dotenv=True, recycle_tgt=True))\n</code></pre>"},{"location":"ai-integration/mcp-server/#configuration","title":"Configuration","text":""},{"location":"ai-integration/mcp-server/#environment-variables","title":"Environment Variables","text":"<p>Create a <code>.env</code> file with your credentials:</p> <pre><code>EPTR_USERNAME=your.email@example.com\nEPTR_PASSWORD=yourpassword\n</code></pre>"},{"location":"ai-integration/mcp-server/#server-options","title":"Server Options","text":"<pre><code>from eptr2.mcp import run_mcp_server\nimport asyncio\n\nasyncio.run(run_mcp_server(\n    use_dotenv=True,       # Load credentials from .env\n    recycle_tgt=True,      # Reuse authentication tickets\n    dotenv_path=\".env\",    # Path to .env file\n))\n</code></pre>"},{"location":"ai-integration/mcp-server/#available-mcp-tools","title":"Available MCP Tools","text":"<p>The MCP server exposes the following tools:</p>"},{"location":"ai-integration/mcp-server/#price-tools","title":"Price Tools","text":"Tool Description <code>get_market_clearing_price</code> Day-ahead market prices (MCP/PTF) <code>get_system_marginal_price</code> System marginal prices (SMP/SMF) <code>get_imbalance_price</code> Positive and negative imbalance prices"},{"location":"ai-integration/mcp-server/#consumption-tools","title":"Consumption Tools","text":"Tool Description <code>get_real_time_consumption</code> Real-time consumption data <code>get_demand_forecast</code> Load plan forecasts"},{"location":"ai-integration/mcp-server/#generation-tools","title":"Generation Tools","text":"Tool Description <code>get_real_time_generation</code> Generation by resource type"},{"location":"ai-integration/mcp-server/#composite-tools","title":"Composite Tools","text":"Tool Description <code>get_hourly_consumption_and_forecast</code> Combined consumption and forecast data <code>get_price_and_cost_data</code> Comprehensive price and cost data"},{"location":"ai-integration/mcp-server/#discovery-tools","title":"Discovery Tools","text":"Tool Description <code>get_available_eptr2_calls</code> List all 213+ API endpoints <code>call_eptr2_api</code> Call any API endpoint by key"},{"location":"ai-integration/mcp-server/#example-queries","title":"Example Queries","text":"<p>Once connected to Claude or another MCP-compatible assistant, you can ask:</p> <ul> <li>\"What are today's electricity prices in Turkey?\"</li> <li>\"Show me the real-time generation by fuel type\"</li> <li>\"Compare MCP and SMP for the last week\"</li> <li>\"What was the peak consumption yesterday?\"</li> </ul>"},{"location":"ai-integration/mcp-server/#integration-methods","title":"Integration Methods","text":""},{"location":"ai-integration/mcp-server/#1-claude-desktop","title":"1. Claude Desktop","text":"<p>See Claude Desktop Setup for detailed instructions.</p>"},{"location":"ai-integration/mcp-server/#2-vs-code-with-copilot","title":"2. VS Code with Copilot","text":"<ol> <li> <p>Enable MCP in VS Code settings:    <pre><code>{\n  \"chat.mcp.discovery.enabled\": true\n}\n</code></pre></p> </li> <li> <p>Configure MCP server in <code>mcp-config.json</code></p> </li> </ol>"},{"location":"ai-integration/mcp-server/#3-custom-integration","title":"3. Custom Integration","text":"<p>Use the MCP client library:</p> <pre><code>import asyncio\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\n\nasync def main():\n    server_params = StdioServerParameters(\n        command=\"eptr2-mcp-server\"\n    )\n\n    async with stdio_client(server_params) as (read, write):\n        async with ClientSession(read, write) as session:\n            await session.initialize()\n\n            # List available tools\n            tools = await session.list_tools()\n            print(tools)\n\n            # Call a tool\n            result = await session.call_tool(\n                \"get_market_clearing_price\",\n                {\"start_date\": \"2024-07-29\", \"end_date\": \"2024-07-29\"}\n            )\n            print(result)\n\nasyncio.run(main())\n</code></pre>"},{"location":"ai-integration/mcp-server/#debugging","title":"Debugging","text":""},{"location":"ai-integration/mcp-server/#check-server-status","title":"Check Server Status","text":"<pre><code># Run with verbose output\nEPTR_USERNAME=... EPTR_PASSWORD=... eptr2-mcp-server --verbose\n</code></pre>"},{"location":"ai-integration/mcp-server/#test-connection","title":"Test Connection","text":"<pre><code>from eptr2.mcp.server import create_mcp_server\n\nserver = create_mcp_server(use_dotenv=True)\nprint(f\"Server created: {server}\")\n</code></pre>"},{"location":"ai-integration/mcp-server/#best-practices","title":"Best Practices","text":"<ol> <li>Use environment variables - Don't hardcode credentials</li> <li>Enable TGT recycling - Reduces authentication overhead</li> <li>Set appropriate timeouts - For slow network connections</li> <li>Monitor usage - Be aware of API rate limits</li> </ol>"},{"location":"ai-integration/mcp-server/#security-considerations","title":"Security Considerations","text":"<ul> <li>Never commit <code>.env</code> files to version control</li> <li>Use secure credential management in production</li> <li>Consider network isolation for sensitive deployments</li> </ul>"},{"location":"ai-integration/mcp-server/#next-steps","title":"Next Steps","text":"<ul> <li>Claude Desktop Setup</li> <li>Agent Skills</li> <li>API Reference - MCP</li> </ul>"},{"location":"api/composite/","title":"Composite Functions","text":"<p>The <code>eptr2.composite</code> module provides pre-built functions that combine multiple API calls for common analysis tasks.</p>"},{"location":"api/composite/#overview","title":"Overview","text":"<p>Composite functions simplify data retrieval by:</p> <ul> <li>Combining multiple related API calls</li> <li>Merging and transforming data</li> <li>Handling missing data gracefully</li> <li>Providing consistent output formats</li> </ul>"},{"location":"api/composite/#import","title":"Import","text":"<pre><code>from eptr2.composite import (\n    get_hourly_consumption_and_forecast_data,\n    get_hourly_price_and_cost_data,\n    get_hourly_production_data,\n    get_hourly_production_plan_data,\n    get_imbalance_data,\n)\n</code></pre>"},{"location":"api/composite/#function-reference","title":"Function Reference","text":""},{"location":"api/composite/#consumption-functions","title":"Consumption Functions","text":""},{"location":"api/composite/#eptr2.composite.consumption.get_hourly_consumption_and_forecast_data","title":"get_hourly_consumption_and_forecast_data","text":"<pre><code>get_hourly_consumption_and_forecast_data(start_date: str, end_date: str, eptr: EPTR2 | None = None, verbose: bool = False, include_contract_symbol: bool = False, **kwargs)\n</code></pre> <p>This composite function gets load plan, UECM (settlement consumption), real time and consumption data. If end date is after the last settlement data, UECM is filled with real time consumption under consumption column.</p> Source code in <code>src/eptr2/composite/consumption.py</code> <pre><code>def get_hourly_consumption_and_forecast_data(\n    start_date: str,\n    end_date: str,\n    eptr: EPTR2 | None = None,\n    verbose: bool = False,\n    include_contract_symbol: bool = False,\n    **kwargs,\n):\n    \"\"\"\n    This composite function gets load plan, UECM (settlement consumption), real time and consumption data. If end date is after the last settlement data, UECM is filled with real time consumption under consumption column.\n    \"\"\"\n\n    if eptr is None:\n        eptr = EPTR2(dotenv_path=kwargs.get(\"dotenv_path\", \".env\"))\n\n    if verbose:\n        print(\"Loading load plan...\")\n\n    lp_df = eptr.call(\n        \"load-plan\",\n        start_date=start_date,\n        end_date=end_date,\n        request_kwargs={\"timeout\": 5},\n    )\n\n    df = lp_df[[\"date\", \"lep\"]].rename(columns={\"lep\": \"load_plan\", \"date\": \"dt\"})\n\n    if verbose:\n        print(\"Loading UECM...\")\n\n    uecm_df: pd.DataFrame = eptr.call(\n        \"uecm\", start_date=start_date, end_date=end_date, request_kwargs={\"timeout\": 5}\n    )\n\n    if not uecm_df.empty:\n        uecm_df = uecm_df[[\"period\", \"swv\"]].rename(\n            columns={\"period\": \"dt\", \"swv\": \"uecm\"}\n        )\n\n        df = df.merge(\n            uecm_df,\n            on=\"dt\",\n            how=\"outer\",\n        )\n\n    if verbose:\n        print(\"Loading real time consumption...\")\n\n    rt_cons = eptr.call(\n        \"rt-cons\",\n        start_date=start_date,\n        end_date=end_date,\n        request_kwargs={\"timeout\": 5},\n    )\n\n    df = df.merge(\n        rt_cons[[\"date\", \"consumption\"]].rename(\n            columns={\"date\": \"dt\", \"consumption\": \"rt_cons\"}\n        ),\n        on=\"dt\",\n        how=\"outer\",\n    )\n\n    if not uecm_df.empty:\n        df[\"consumption\"] = df.apply(\n            lambda x: x[\"rt_cons\"] if pd.isnull(x[\"uecm\"]) else x[\"uecm\"], axis=1\n        )\n    else:\n        df[\"consumption\"] = df[\"rt_cons\"].copy()\n\n    if include_contract_symbol:\n        try:\n            df[\"contract\"] = df[\"dt\"].apply(lambda x: iso_to_contract(x))\n        except Exception as e:\n            print(\"Contract information could not be added. Error:\", e)\n\n    return df\n</code></pre>"},{"location":"api/composite/#price-functions","title":"Price Functions","text":""},{"location":"api/composite/#eptr2.composite.price_and_cost.get_hourly_price_and_cost_data","title":"get_hourly_price_and_cost_data","text":"<pre><code>get_hourly_price_and_cost_data(start_date: str, end_date: str, eptr: EPTR2 | None = None, include_wap: bool = True, add_kupst_cost: bool = True, verbose: bool = False, include_contract_symbol: bool = True, timeout: int = 10, **kwargs)\n</code></pre> <p>This composite function gets price and imbalance (kupst included) cost data. Imbalance cost data consists of MCP (PTF), SMP (SMF), system direction (Enerji A\u00e7\u0131\u011f\u0131 - up regulated, Energy Fazlas\u0131 - down regulated, Dengede - Balanced), positive imbalance cost and negative imbalance cost.</p> <p>Resulting columns are: - date: Datetime in ISO format and +03:00 timezone - mcp: Market Clearing Price (MCP/PTF) in TL (Turkish Lira) - smp: System Marginal Price (SMP/SMF) in TL (Turkish Lira) - wap: Weighted Average Price (WAP) in TL (Turkish Lira) - system_direction: System direction (Enerji A\u00e7\u0131\u011f\u0131 - up regulated, Energy Fazlas\u0131 - down regulated, Dengede - Balanced) - sd_sign: System direction sign (1 for Enerji Fazlas\u0131, -1 for Enerji A\u00e7\u0131\u011f\u0131, 0 for Dengede) - pos_imb_price: Positive imbalance price in TL (Turkish Lira) - neg_imb_price: Negative imbalance price in TL (Turkish Lira) (negative value) - pos_imb_cost: Positive imbalance cost in TL (Turkish Lira) (ptf - pos_imb_price) - neg_imb_cost: Negative imbalance cost in TL (Turkish Lira) (neg_imb_price - ptf)</p> Source code in <code>src/eptr2/composite/price_and_cost.py</code> <pre><code>def get_hourly_price_and_cost_data(\n    start_date: str,\n    end_date: str,\n    eptr: EPTR2 | None = None,\n    include_wap: bool = True,\n    add_kupst_cost: bool = True,\n    verbose: bool = False,\n    include_contract_symbol: bool = True,\n    timeout: int = 10,\n    **kwargs,\n):\n    \"\"\"\n    This composite function gets price and imbalance (kupst included) cost data.\n    Imbalance cost data consists of MCP (PTF), SMP (SMF), system direction (Enerji A\u00e7\u0131\u011f\u0131 - up regulated, Energy Fazlas\u0131 - down regulated, Dengede - Balanced), positive imbalance cost and negative imbalance cost.\n\n    Resulting columns are:\n    - date: Datetime in ISO format and +03:00 timezone\n    - mcp: Market Clearing Price (MCP/PTF) in TL (Turkish Lira)\n    - smp: System Marginal Price (SMP/SMF) in TL (Turkish Lira)\n    - wap: Weighted Average Price (WAP) in TL (Turkish Lira)\n    - system_direction: System direction (Enerji A\u00e7\u0131\u011f\u0131 - up regulated, Energy Fazlas\u0131 - down regulated, Dengede - Balanced)\n    - sd_sign: System direction sign (1 for Enerji Fazlas\u0131, -1 for Enerji A\u00e7\u0131\u011f\u0131, 0 for Dengede)\n    - pos_imb_price: Positive imbalance price in TL (Turkish Lira)\n    - neg_imb_price: Negative imbalance price in TL (Turkish Lira) (negative value)\n    - pos_imb_cost: Positive imbalance cost in TL (Turkish Lira) (ptf - pos_imb_price)\n    - neg_imb_cost: Negative imbalance cost in TL (Turkish Lira) (neg_imb_price - ptf)\n    \"\"\"\n\n    if eptr is None:\n        eptr = EPTR2(dotenv_path=kwargs.get(\"dotenv_path\", \".env\"))\n\n    if verbose:\n        print(\"Getting MCP, SMP and imbalance price data...\")\n\n    max_lives = kwargs.get(\"max_lives\", 2)\n\n    lives = max_lives\n    while lives &gt; 0:\n        try:\n            price_df = eptr.call(\n                \"mcp-smp-imb\",\n                start_date=start_date,\n                end_date=end_date,\n                request_kwargs={\"timeout\": timeout},\n            )\n            break\n        except Exception as e:\n            lives -= 1\n            if lives == 0:\n                raise e\n            else:\n                if verbose:\n                    print(\n                        f\"Error occurred while getting MCP, SMP and imbalance price data. Retrying... ({lives} attempts left)\"\n                    )\n\n    price_df.drop(columns=[\"time\"], inplace=True)\n\n    price_df.rename(\n        columns={\n            \"ptf\": \"mcp\",\n            \"smf\": \"smp\",\n            \"positiveImbalance\": \"pos_imb_price\",\n            \"negativeImbalance\": \"neg_imb_price\",\n            \"systemStatus\": \"system_direction\",\n        },\n        inplace=True,\n    )\n\n    price_df[\"sd_sign\"] = price_df[\"system_direction\"].apply(\n        lambda x: -1 if x == \"Enerji A\u00e7\u0131\u011f\u0131\" else 1 if x == \"Enerji Fazlas\u0131\" else 0\n    )\n\n    price_df[\"pos_imb_cost\"] = price_df[\"mcp\"] - price_df[\"pos_imb_price\"]\n    price_df[\"neg_imb_cost\"] = price_df[\"neg_imb_price\"] - price_df[\"mcp\"]\n\n    if include_wap:\n        if verbose:\n            print(\"Getting WAP data...\")\n\n        lives = max_lives\n        while lives &gt; 0:\n            try:\n                wap_df = eptr.call(\n                    \"wap\",\n                    start_date=start_date,\n                    end_date=end_date,\n                    request_kwargs={\"timeout\": timeout},\n                )\n                wap_df.drop(columns=[\"hour\"], inplace=True)\n                break\n            except Exception as e:\n                lives -= 1\n                if lives == 0:\n                    raise e\n                else:\n                    if verbose:\n                        print(\n                            f\"Error occurred while getting WAP data. Retrying... ({lives} attempts left)\"\n                        )\n\n        price_df = price_df.merge(wap_df, on=\"date\", how=\"outer\")\n\n    if include_contract_symbol or add_kupst_cost:\n        try:\n            price_df[\"contract\"] = price_df[\"date\"].apply(lambda x: iso_to_contract(x))\n        except Exception as e:\n            print(\"Contract information could not be added. Error:\", e)\n\n    if add_kupst_cost:\n        if verbose:\n            print(\"Calculating unit KUPST cost...\")\n\n        added_params = {\n            k: v\n            for k, v in kwargs.items()\n            if k\n            in [\n                \"kupst_multiplier\",\n                \"kupst_floor_price\",\n                \"include_maintenance_penalty\",\n            ]\n        }\n\n        price_df[\"kupst_cost\"] = price_df.apply(\n            lambda x: calculate_unit_kupst_cost_by_contract(\n                contract=x[\"contract\"],\n                mcp=x[\"mcp\"],\n                smp=x[\"smp\"],\n                **added_params,\n            ),\n            axis=1,\n        )\n\n        if not include_contract_symbol:\n            price_df.drop(columns=[\"contract\"], inplace=True)\n\n    ### Column ordering\n    columns_order = [\n        \"date\",\n        \"contract\",\n        \"pos_imb_vol\",\n        \"neg_imb_vol\",\n        \"pos_imb_mwh\",\n        \"neg_imb_mwh\",\n        \"mcp\",\n        \"wap\",\n        \"smp\",\n        \"pos_imb_price\",\n        \"neg_imb_price\",\n        \"system_direction\",\n        \"sd_sign\",\n        \"pos_imb_cost\",\n        \"neg_imb_cost\",\n        \"kupst_cost\",\n    ]\n\n    columns_order = [col for col in columns_order if col in price_df.columns]\n\n    price_df = price_df[columns_order]\n\n    return price_df\n</code></pre>"},{"location":"api/composite/#production-functions","title":"Production Functions","text":""},{"location":"api/composite/#eptr2.composite.production.get_hourly_production_data","title":"get_hourly_production_data","text":"<pre><code>get_hourly_production_data(start_date: str, end_date: str, eptr: EPTR2 | None = None, rt_pp_id: str | int | None = None, uevm_pp_id: str | int | None = None, verbose: bool = False, include_contract_symbol: bool = True, skip_uevm: bool = False, skip_rt: bool = False, **kwargs)\n</code></pre> <p>This composite function gets production data (Ger\u00e7ek Zamanl\u0131 \u00dcretim, UEVM) and merges them.</p> <p>It is also possible to enter pp_id to get the production data for a specific production plan. Example ID values are given below.</p> <p>rt_pp_id=641, ## ATAT\u00dcRK HES uevm_pp_id=142, ## ATAT\u00dcRK HES</p> Source code in <code>src/eptr2/composite/production.py</code> <pre><code>def get_hourly_production_data(\n    start_date: str,\n    end_date: str,\n    eptr: EPTR2 | None = None,\n    rt_pp_id: str | int | None = None,\n    uevm_pp_id: str | int | None = None,\n    verbose: bool = False,\n    include_contract_symbol: bool = True,\n    skip_uevm: bool = False,\n    skip_rt: bool = False,\n    **kwargs,\n):\n    \"\"\"\n    This composite function gets production data (Ger\u00e7ek Zamanl\u0131 \u00dcretim, UEVM) and merges them.\n\n    It is also possible to enter pp_id to get the production data for a specific production plan. Example ID values are given below.\n\n    rt_pp_id=641, ## ATAT\u00dcRK HES\n    uevm_pp_id=142, ## ATAT\u00dcRK HES\n    \"\"\"\n\n    if eptr is None:\n        eptr = EPTR2(dotenv_path=kwargs.get(\"dotenv_path\", \".env\"))\n\n    max_trials = kwargs.get(\"max_trials\", 2)\n    timeout = kwargs.get(\"timeout\", 5)\n    sleep_interval = kwargs.get(\"sleep_interval\", 3)\n\n    #### SANITY CHECKS ####\n    if skip_rt and skip_uevm:\n        raise ValueError(\"Both skip_rt and skip_uevm cannot be True.\")\n\n    ####\u00a0REAL TIME GENERATION PHASE ####\n    if skip_rt:\n        rt_included = False\n        rt_gen_df = pd.DataFrame()\n\n    else:\n        rt_included = True\n        if verbose:\n            print(\"Loading real time production data...\")\n\n        trials = max_trials\n        while trials &gt; 0:\n            try:\n                rt_gen_df: pd.DataFrame = eptr.call(\n                    \"rt-gen\",\n                    start_date=start_date,\n                    end_date=end_date,\n                    pp_id=rt_pp_id,\n                    request_kwargs={\"timeout\": timeout},\n                )\n                break\n            except Exception as e:\n                trials -= 1\n\n                if trials == 0:\n                    raise e\n\n                time.sleep(sleep_interval)\n                if verbose:\n                    print(\n                        f\"An error occurred while fetching RT data. Retrying after {sleep_interval} seconds... ({trials} attempts left)\"\n                    )\n\n        if rt_gen_df.empty:\n            raise ValueError(\"No data (production) is available for this date range.\")\n\n        try:\n            rt_gen_df.drop(\"hour\", axis=1, inplace=True)\n        except Exception as e:\n            if verbose:\n                print(e)\n\n        rt_gen_df.columns = [\n            x + \"_rt\" if x not in [\"date\"] else x for x in rt_gen_df.columns\n        ]\n\n    ####\u00a0UEVM PHASE ####\n    if skip_uevm:\n        uevm_included = False\n        uevm_df = pd.DataFrame()\n\n    else:\n        uevm_included = True\n        if verbose:\n            print(\"Loading UEVM data...\")\n\n        trials = max_trials\n        while trials &gt; 0:\n            try:\n                uevm_df: pd.DataFrame = eptr.call(\n                    \"uevm\",\n                    start_date=start_date,\n                    end_date=end_date,\n                    pp_id=uevm_pp_id,\n                    request_kwargs={\"timeout\": timeout},\n                )\n                break\n            except Exception as e:\n                trials -= 1\n                if trials == 0:\n                    raise e\n\n                time.sleep(sleep_interval)\n                if verbose:\n                    print(\n                        f\"An error occurred while fetching UEVM data. Retrying after {sleep_interval} seconds... ({trials} attempts left)\"\n                    )\n\n        try:\n            uevm_df.drop(\"hour\", axis=1, inplace=True)\n        except Exception as e:\n            within_settlement = check_date_for_settlement(x=end_date)\n            if not within_settlement:\n                print(\"Warning: The end date may not be within the settlement period.\")\n            if verbose:\n                print(e)\n\n        uevm_df.columns = [\n            x + \"_uevm\" if x not in [\"date\"] else x for x in uevm_df.columns\n        ]\n\n    if uevm_included and rt_included:\n        if verbose:\n            print(\"Merging data...\")\n\n        if uevm_df.empty:\n            merged_df = rt_gen_df.copy()\n        else:\n            merged_df = rt_gen_df.merge(uevm_df, how=\"left\", on=[\"date\"])\n    elif uevm_included:\n        merged_df = uevm_df.copy()\n    elif rt_included:\n        merged_df = rt_gen_df.copy()\n\n    if include_contract_symbol:\n        try:\n            merged_df[\"contract\"] = merged_df[\"date\"].apply(\n                lambda x: iso_to_contract(x)\n            )\n        except Exception as e:\n            print(\"Contract information could not be added. Error:\", e)\n\n    merged_df = merged_df.rename(columns={\"date\": \"dt\"})\n\n    return merged_df\n</code></pre>"},{"location":"api/composite/#quick-reference","title":"Quick Reference","text":""},{"location":"api/composite/#get_hourly_consumption_and_forecast_data","title":"get_hourly_consumption_and_forecast_data","text":"<p>Combines load plan, UECM, and real-time consumption data.</p> <pre><code>from eptr2.composite import get_hourly_consumption_and_forecast_data\n\ndf = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    verbose=True\n)\n</code></pre> <p>Returns:</p> Column Type Description <code>dt</code> datetime Timestamp <code>load_plan</code> float Load plan forecast (MWh) <code>uecm</code> float Settlement consumption (MWh) <code>rt_cons</code> float Real-time consumption (MWh) <code>consumption</code> float Best available consumption"},{"location":"api/composite/#get_hourly_price_and_cost_data","title":"get_hourly_price_and_cost_data","text":"<p>Combines MCP, SMP, and imbalance price data.</p> <pre><code>from eptr2.composite import get_hourly_price_and_cost_data\n\ndf = get_hourly_price_and_cost_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre> <p>Returns:</p> Column Type Description <code>dt</code> datetime Timestamp <code>mcp</code> float Market Clearing Price (TL/MWh) <code>smp</code> float System Marginal Price (TL/MWh) <code>positive_imbalance</code> float Positive imbalance price <code>negative_imbalance</code> float Negative imbalance price"},{"location":"api/composite/#get_hourly_production_data","title":"get_hourly_production_data","text":"<p>Retrieves hourly production data by source.</p> <pre><code>from eptr2.composite import get_hourly_production_data\n\ndf = get_hourly_production_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre>"},{"location":"api/composite/#get_imbalance_data","title":"get_imbalance_data","text":"<p>Retrieves imbalance-related data for cost calculations.</p> <pre><code>from eptr2.composite import get_imbalance_data\n\ndf = get_imbalance_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre>"},{"location":"api/composite/#common-parameters","title":"Common Parameters","text":"<p>All composite functions share these parameters:</p> Parameter Type Default Description <code>start_date</code> <code>str</code> Required Start date (YYYY-MM-DD) <code>end_date</code> <code>str</code> Required End date (YYYY-MM-DD) <code>eptr</code> <code>EPTR2</code> <code>None</code> EPTR2 instance (created if not provided) <code>verbose</code> <code>bool</code> <code>False</code> Print progress messages <code>**kwargs</code> - - Additional parameters"},{"location":"api/composite/#examples","title":"Examples","text":""},{"location":"api/composite/#complete-analysis-pipeline","title":"Complete Analysis Pipeline","text":"<pre><code>from eptr2 import EPTR2\nfrom eptr2.composite import (\n    get_hourly_consumption_and_forecast_data,\n    get_hourly_price_and_cost_data\n)\nimport pandas as pd\n\n# Initialize once\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Get consumption data\nconsumption = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    eptr=eptr,\n    verbose=True\n)\n\n# Get price data\nprices = get_hourly_price_and_cost_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    eptr=eptr\n)\n\n# Merge for analysis\nanalysis = pd.merge(consumption, prices, on='dt')\n\n# Calculate costs\nanalysis['total_cost'] = analysis['consumption'] * analysis['mcp']\nprint(f\"Total cost: {analysis['total_cost'].sum():,.2f} TL\")\n</code></pre>"},{"location":"api/composite/#with-verbose-output","title":"With Verbose Output","text":"<pre><code>df = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    verbose=True\n)\n</code></pre> <p>Output: <pre><code>Loading load plan...\nLoading UECM...\nLoading real time consumption...\n</code></pre></p>"},{"location":"api/composite/#using-custom-eptr2-instance","title":"Using Custom EPTR2 Instance","text":"<pre><code>from eptr2 import EPTR2\nfrom eptr2.composite import get_hourly_consumption_and_forecast_data\n\n# Custom configuration\neptr = EPTR2(\n    use_dotenv=True,\n    recycle_tgt=True,\n    tgt_path=\"/custom/path\"\n)\n\ndf = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    eptr=eptr\n)\n</code></pre>"},{"location":"api/composite/#see-also","title":"See Also","text":"<ul> <li>Composite Functions Guide</li> <li>Working with DataFrames</li> </ul>"},{"location":"api/eptr2/","title":"eptr2 Package","text":"<p>The main eptr2 package provides access to Turkish electricity market data through the EPIAS Transparency Platform.</p>"},{"location":"api/eptr2/#installation","title":"Installation","text":"<pre><code>pip install \"eptr2[allextras]\"\n</code></pre>"},{"location":"api/eptr2/#quick-start","title":"Quick Start","text":"<pre><code>from eptr2 import EPTR2\n\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\ndf = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"api/eptr2/#module-overview","title":"Module Overview","text":"Module Description <code>eptr2.main</code> Core EPTR2 class <code>eptr2.composite</code> Pre-built analysis functions <code>eptr2.mcp</code> MCP server for AI integration <code>eptr2.util</code> Utility functions"},{"location":"api/eptr2/#main-exports","title":"Main Exports","text":""},{"location":"api/eptr2/#eptr2.EPTR2","title":"EPTR2","text":"<pre><code>EPTR2(username: str = None, password: str = None, recycle_tgt: bool = True, use_dotenv: bool = True, dotenv_path: str = '.env', **kwargs)\n</code></pre>"},{"location":"api/eptr2/#eptr2.EPTR2.export_tgt_info","title":"export_tgt_info","text":"<pre><code>export_tgt_info()\n</code></pre> <p>Exports TGT information to a dictionary. Contents are TGT itself, expiration timestamp (tgt_exp) and soft expiration (tgt_exp_0 i.e. expiration if not used) timestamp.</p>"},{"location":"api/eptr2/#eptr2.EPTR2.check_dotenv","title":"check_dotenv","text":"<pre><code>check_dotenv(dotenv_path: str = '.env')\n</code></pre> <p>Check for .env file and load environment variables from it.</p>"},{"location":"api/eptr2/#eptr2.EPTR2.get_available_calls","title":"get_available_calls","text":"<pre><code>get_available_calls(include_aliases: bool = False)\n</code></pre> <p>Gets all the available calls of eptr2 package. As a reminder, number of calls at eptr2 package might be lower than the actual calls. If include_aliases is set to True, it also includes the aliases.</p>"},{"location":"api/eptr2/#eptr2.EPTR2.get_number_of_calls","title":"get_number_of_calls","text":"<pre><code>get_number_of_calls()\n</code></pre> <p>List the number of calls in the package. It also lists the number of derived calls and API calls (excluding derived calls).</p>"},{"location":"api/eptr2/#eptr2.EPTR2.get_aliases","title":"get_aliases","text":"<pre><code>get_aliases(include_custom_aliases: bool = False)\n</code></pre> <p>Gets only the aliases. If include_custom_aliases is set to True, it also includes the user defined aliases (custom_aliases).</p>"},{"location":"api/eptr2/#eptr2.EPTR2.call","title":"call","text":"<pre><code>call(key: str, **kwargs)\n</code></pre> <p>Main call function for the API. This function is used to process parameters and make calls to EPIAS Transparency API.</p>"},{"location":"api/eptr2/#eptr2.transparency_call","title":"transparency_call","text":"<pre><code>transparency_call(call_path: dict, call_method: str, call_body: dict | None = None, is_test: bool = False, tgt: str = None, **kwargs)\n</code></pre> <p>Core function to perform the calls and return results. This function is used by the EPTR2 class to make calls to EPIAS Transparency API.</p>"},{"location":"api/eptr2/#eptr2.generate_eptr2_credentials_file","title":"generate_eptr2_credentials_file","text":"<pre><code>generate_eptr2_credentials_file(username: str = 'YOUR_USERNAME', password: str = 'YOUR_PASSWORD', cred_path: str = 'creds/eptr_credentials.json', overwrite: bool = False)\n</code></pre> <p>Generate a credentials file for EPTR2 class. It creates a JSON file with EPTR_USERNAME and EPTR_PASSWORD.</p>"},{"location":"api/eptr2/#eptr2.eptr_w_tgt_wrapper","title":"eptr_w_tgt_wrapper","text":"<pre><code>eptr_w_tgt_wrapper(cred_path: str = 'creds/eptr_credentials.json', **kwargs) -&gt; EPTR2\n</code></pre> <p>This function is a wrapper for the EPTR2 class to handle TGT (Ticket Granting Ticket) management and credentials loading. This way TGT is automatically renewed when it expires, and credentials are loaded from a file or environment variables.</p>"},{"location":"api/main/","title":"EPTR2 Class","text":"<p>The main class for interacting with the EPIAS Transparency Platform API.</p>"},{"location":"api/main/#overview","title":"Overview","text":"<p>The <code>EPTR2</code> class handles authentication, API calls, and response processing for Turkish electricity market data.</p>"},{"location":"api/main/#basic-usage","title":"Basic Usage","text":"<pre><code>from eptr2 import EPTR2\n\n# Using .env file for credentials\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Direct credentials\neptr = EPTR2(username=\"email@example.com\", password=\"password\")\n\n# Make API calls\ndf = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"api/main/#class-reference","title":"Class Reference","text":""},{"location":"api/main/#eptr2.main.EPTR2","title":"EPTR2","text":"<pre><code>EPTR2(username: str = None, password: str = None, recycle_tgt: bool = True, use_dotenv: bool = True, dotenv_path: str = '.env', **kwargs)\n</code></pre> Source code in <code>src/eptr2/main.py</code> <pre><code>def __init__(\n    self,\n    username: str = None,\n    password: str = None,\n    recycle_tgt: bool = True,\n    use_dotenv: bool = True,\n    dotenv_path: str = \".env\",\n    **kwargs,\n) -&gt; None:\n    ##\u00a0kwargs are\n    ### map_param_labels: bool\n    ###\u00a0secure: bool\n    ###\u00a0query_parameters: dict\n    ### just_call_phrase: bool\n    ### root_phrase: str\n    self.ssl_verify = kwargs.get(\"ssl_verify\", True)\n    self.check_postprocess(postprocess=kwargs.get(\"postprocess\", True))\n    self.get_raw_response = kwargs.get(\"get_raw_response\", False)\n\n    ### Credentials and Login\n    self.username = username\n    self.password = password\n    self.is_test = kwargs.get(\"is_test\", False)  ## Currently not being used\n\n    self.temp_new_login_method = kwargs.get(\"new_login_method\", False)\n\n    ###\u00a0Credentials file path is being deprecated in favor of dotenv usage\n    self.credentials_file_path = kwargs.get(\"credentials_file_path\", None)\n\n    ### Dotenv usage. Get EPTR_USERNAME and EPTR_PASSWORD from .env file if use_dotenv is True and environment file exists and credentials are recorded there.\n    self.use_dotenv = use_dotenv\n    if self.use_dotenv:\n        env_check_d = self.check_dotenv(dotenv_path=dotenv_path)\n    else:\n        env_check_d = None\n\n    self.upass_check(\n        env_check_d=env_check_d, custom_root_phrase=kwargs.get(\"root_phrase\", None)\n    )\n\n    ###\u00a0Options to recycle tgt\n    self.recycle_tgt = recycle_tgt\n    self.tgt_dir_path = kwargs.get(\"tgt_path\", \".\")\n\n    input_tgt_d = kwargs.get(\"tgt_d\", None)\n    self.import_tgt_info(input_tgt_d)\n\n    self.check_renew_tgt(**kwargs)\n\n    ##\u00a0Path map keys and custom aliases\n    self.path_map_keys = get_path_map(just_call_keys=True)\n    self.custom_aliases = kwargs.get(\"custom_aliases\", {})\n</code></pre>"},{"location":"api/main/#eptr2.main.EPTR2.call","title":"call","text":"<pre><code>call(key: str, **kwargs)\n</code></pre> <p>Main call function for the API. This function is used to process parameters and make calls to EPIAS Transparency API.</p> Source code in <code>src/eptr2/main.py</code> <pre><code>def call(self, key: str, **kwargs):\n    \"\"\"\n    Main call function for the API. This function is used to process parameters and make calls to EPIAS Transparency API.\n    \"\"\"\n\n    self.check_renew_tgt(**kwargs)\n    raw_key = key\n    key = alias_to_path(alias=key, custom_aliases=self.custom_aliases)\n\n    if key not in self.path_map_keys:\n        if raw_key == key:\n            raise Exception(\n                f\"This call {raw_key} is not yet defined in calls or aliases. Call 'get_available_calls' method to see the available calls.\"\n            )\n        else:\n            raise Exception(\n                f\"This alias {raw_key} forwarded to key {key} is not yet defined in calls. Call 'get_available_calls' method to see the available calls.\"\n            )\n\n    call_path = get_total_path(key)\n    call_method = get_call_method(key)\n    required_body_params = get_required_parameters(key)\n    call_body_raw = kwargs.pop(\"call_body\", kwargs)\n\n    ### There are some calls requiring special handling, they have a special function to process them\n    call_body_raw = process_special_calls(key, call_body_raw)\n\n    optional_body_params = get_optional_parameters(key)\n    all_params = required_body_params + optional_body_params\n\n    call_body = {\n        k: preprocess_parameter(k, v)\n        for k, v in call_body_raw.items()  ## If there is a call_body parameter in kwargsi, use it, else use kwargs\n        if k in all_params\n    }\n\n    for body_key in required_body_params:\n        if body_key not in call_body.keys():\n            call_body[body_key] = preprocess_parameter(body_key, None)\n        kwargs.pop(body_key, None)\n\n    if call_body is not None:\n        if not all([x in call_body.keys() for x in required_body_params]):\n            raise Exception(\"Some required parameters are missing in call body.\")\n\n        if kwargs.get(\"map_param_labels\", True):\n            cb2 = {}\n            for k, v in call_body.items():\n                ##\u00a0Updated this part to handle multiple labels originating from a single label\n                label = get_param_label(k)[\"label\"]\n                value = v\n                if isinstance(label, list):\n                    for l in label:  # noqa: E741\n                        cb2[l] = value\n                else:\n                    cb2[label] = value\n            call_body = copy.deepcopy(cb2)\n\n    elif len(required_body_params) &gt; 0:\n        raise Exception(\"Required parameters are missing in call body.\")\n\n    ## If the call is uevm, change powerPlantId to powerplantId due to only non-standard naming in powerPlantId\n    if key == \"uevm\" and \"powerPlantId\" in call_body.keys():\n        call_body[\"powerplantId\"] = call_body.pop(\"powerPlantId\")\n\n    res = transparency_call(\n        call_path=call_path,\n        call_method=call_method,\n        call_body=call_body,\n        root_phrase=self.root_phrase,\n        ssl_verify=self.ssl_verify,\n        is_test=self.is_test,\n        tgt=self.tgt,\n        **kwargs,\n    )\n\n    ## Set soft timeout for tgt renewal\n    self.tgt_exp_0 = min(\n        self.tgt_exp,\n        datetime.now().timestamp() + 60 * 90,\n    )\n\n    if self.recycle_tgt:\n        self.export_tgt_info()\n\n    if kwargs.get(\"get_raw_response\", self.get_raw_response):\n        return res\n\n    res = json.loads(res.data.decode(\"utf-8\"))\n    if kwargs.get(\"postprocess\", self.postprocess):\n        from eptr2.mapping.processing import get_postprocess_function\n\n        df = get_postprocess_function(key)(res, key=key)\n        return df\n\n    return res\n</code></pre>"},{"location":"api/main/#eptr2.main.EPTR2.get_available_calls","title":"get_available_calls","text":"<pre><code>get_available_calls(include_aliases: bool = False)\n</code></pre> <p>Gets all the available calls of eptr2 package. As a reminder, number of calls at eptr2 package might be lower than the actual calls. If include_aliases is set to True, it also includes the aliases.</p> Source code in <code>src/eptr2/main.py</code> <pre><code>def get_available_calls(self, include_aliases: bool = False):\n    \"\"\"\n    Gets all the available calls of eptr2 package. As a reminder, number of calls at eptr2 package might be lower than the actual calls. If include_aliases is set to True, it also includes the aliases.\n    \"\"\"\n\n    if include_aliases:\n        return {\n            \"keys\": self.path_map_keys,\n            \"default_aliases\": get_alias_map(),\n            \"custom_aliases\": self.custom_aliases,\n        }\n\n    return self.path_map_keys\n</code></pre>"},{"location":"api/main/#eptr2.main.EPTR2.get_number_of_calls","title":"get_number_of_calls","text":"<pre><code>get_number_of_calls()\n</code></pre> <p>List the number of calls in the package. It also lists the number of derived calls and API calls (excluding derived calls).</p> Source code in <code>src/eptr2/main.py</code> <pre><code>def get_number_of_calls(self):\n    \"\"\"\n    List the number of calls in the package. It also lists the number of derived calls and API calls (excluding derived calls).\n    \"\"\"\n\n    d = {\n        \"all_calls\": self.path_map_keys,\n        \"derived_calls\": get_derived_calls(),\n    }\n    d[\"n_total_calls\"] = len(d[\"all_calls\"])\n    d[\"n_derived_calls\"] = len(d[\"derived_calls\"])\n    d[\"n_api_calls\"] = len(d[\"all_calls\"]) - len(d[\"derived_calls\"])\n\n    return d\n</code></pre>"},{"location":"api/main/#eptr2.main.EPTR2.get_aliases","title":"get_aliases","text":"<pre><code>get_aliases(include_custom_aliases: bool = False)\n</code></pre> <p>Gets only the aliases. If include_custom_aliases is set to True, it also includes the user defined aliases (custom_aliases).</p> Source code in <code>src/eptr2/main.py</code> <pre><code>def get_aliases(self, include_custom_aliases: bool = False):\n    \"\"\"\n    Gets only the aliases. If include_custom_aliases is set to True, it also includes the user defined aliases (custom_aliases).\n    \"\"\"\n\n    alias_d = get_alias_map()\n    if include_custom_aliases:\n        alias_d.update(self.custom_aliases)\n\n    return alias_d\n</code></pre>"},{"location":"api/main/#eptr2.main.EPTR2.get_tgt","title":"get_tgt","text":"<pre><code>get_tgt(**kwargs)\n</code></pre> Source code in <code>src/eptr2/main.py</code> <pre><code>def get_tgt(self, **kwargs):\n    if self.username is None or self.password is None:\n        raise Exception(\"Username and password must be provided for tgt renewal.\")\n\n    test_suffix = \"-prp\" if self.is_test else \"\"\n    login_url = f\"\"\"https://giris{test_suffix}.epias.com.tr/cas/v1/tickets\"\"\"\n\n    body_str = f\"username={quote(self.username)}&amp;password={quote(self.password)}\"\n\n    http = urllib3.PoolManager(\n        cert_reqs=\"CERT_REQUIRED\" if self.ssl_verify else \"CERT_NONE\"\n    )\n\n    res = http.request(\n        method=\"POST\",\n        url=login_url,\n        headers={\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n            \"Accept\": \"text/plain\",\n        },\n        body=body_str,\n        **kwargs.get(\"request_kwargs\", {\"timeout\": 10}),\n    )\n    if res.status not in [200, 201]:\n        raise Exception(\n            \"Request failed with status code: \"\n            + str(res.status)\n            + \": \"\n            + res.data.decode(\"utf-8\")\n        )\n\n    if isinstance(res.data, bytes):\n        res_data = res.data.decode(\"utf-8\")\n    else:\n        res_data = res.data\n\n    if res_data.startswith(\"TGT-\"):\n        tgt = res_data\n    else:\n        raise Exception(\"Login failed. TGT not found in response: \" + res_data)\n\n    self.tgt = tgt\n    tgt_start_time = datetime.now()\n\n    ## Hard timeout\n    self.tgt_exp = (tgt_start_time + timedelta(hours=1, minutes=45)).timestamp()\n\n    ## Soft timeout\n    self.tgt_exp_0 = min(\n        self.tgt_exp,\n        (tgt_start_time + timedelta(hours=1, minutes=45)).timestamp(),\n    )\n\n    if self.recycle_tgt:\n        self.export_tgt_info()\n</code></pre>"},{"location":"api/main/#eptr2.main.EPTR2.check_renew_tgt","title":"check_renew_tgt","text":"<pre><code>check_renew_tgt(**kwargs)\n</code></pre> Source code in <code>src/eptr2/main.py</code> <pre><code>def check_renew_tgt(self, **kwargs):\n    force_renew_tgt = kwargs.get(\"force_renew_tgt\", False)\n    if (\n        self.tgt is None\n        or self.tgt_exp_0 &lt; datetime.now().timestamp()\n        or force_renew_tgt\n    ):\n        self.get_tgt(**kwargs)\n</code></pre>"},{"location":"api/main/#constructor-parameters","title":"Constructor Parameters","text":"Parameter Type Default Description <code>username</code> <code>str</code> <code>None</code> EPIAS platform username (email) <code>password</code> <code>str</code> <code>None</code> EPIAS platform password <code>recycle_tgt</code> <code>bool</code> <code>True</code> Reuse authentication tickets <code>use_dotenv</code> <code>bool</code> <code>True</code> Load credentials from <code>.env</code> file <code>dotenv_path</code> <code>str</code> <code>\".env\"</code> Path to the <code>.env</code> file <code>ssl_verify</code> <code>bool</code> <code>True</code> Verify SSL certificates <code>postprocess</code> <code>bool</code> <code>True</code> Return DataFrame instead of raw response <code>get_raw_response</code> <code>bool</code> <code>False</code> Return raw HTTP response"},{"location":"api/main/#the-call-method","title":"The <code>call</code> Method","text":"<p>The primary method for making API requests:</p> <pre><code>result = eptr.call(\n    key=\"mcp\",                      # API endpoint key\n    start_date=\"2024-07-29\",        # Start date (YYYY-MM-DD)\n    end_date=\"2024-07-29\",          # End date (YYYY-MM-DD)\n    postprocess=True,               # Return DataFrame\n    request_kwargs={\"timeout\": 10}  # urllib3 request options\n)\n</code></pre>"},{"location":"api/main/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>key</code> <code>str</code> Yes API endpoint name or alias <code>start_date</code> <code>str</code> Usually Start date in YYYY-MM-DD format <code>end_date</code> <code>str</code> Usually End date in YYYY-MM-DD format <code>postprocess</code> <code>bool</code> No Return DataFrame (default: True) <code>request_kwargs</code> <code>dict</code> No Additional request parameters <code>**kwargs</code> - No Additional endpoint-specific parameters"},{"location":"api/main/#returns","title":"Returns","text":"<ul> <li>DataFrame: When <code>postprocess=True</code> (default)</li> <li>dict: When <code>postprocess=False</code></li> <li>urllib3.HTTPResponse: When <code>get_raw_response=True</code> on EPTR2 instance</li> </ul>"},{"location":"api/main/#discovery-methods","title":"Discovery Methods","text":""},{"location":"api/main/#get_available_calls","title":"get_available_calls","text":"<p>Returns list of all available API endpoint keys:</p> <pre><code>calls = eptr.get_available_calls()\nprint(len(calls))  # 213+\n</code></pre>"},{"location":"api/main/#get_number_of_calls","title":"get_number_of_calls","text":"<p>Returns count of available calls:</p> <pre><code>count = eptr.get_number_of_calls()\nprint(f\"{count} calls available\")\n</code></pre>"},{"location":"api/main/#get_aliases","title":"get_aliases","text":"<p>Returns dictionary of call aliases:</p> <pre><code>aliases = eptr.get_aliases()\n# {'mcp': 'ptf', 'smp': 'smf', ...}\n</code></pre>"},{"location":"api/main/#authentication-methods","title":"Authentication Methods","text":""},{"location":"api/main/#get_tgt","title":"get_tgt","text":"<p>Manually request a new TGT:</p> <pre><code>eptr.get_tgt()\n</code></pre>"},{"location":"api/main/#check_renew_tgt","title":"check_renew_tgt","text":"<p>Check and renew TGT if expired:</p> <pre><code>eptr.check_renew_tgt(force_renew_tgt=True)\n</code></pre>"},{"location":"api/main/#examples","title":"Examples","text":""},{"location":"api/main/#basic-price-query","title":"Basic Price Query","text":"<pre><code>from eptr2 import EPTR2\n\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Market Clearing Price\nmcp = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\nprint(mcp.head())\n</code></pre>"},{"location":"api/main/#multiple-queries","title":"Multiple Queries","text":"<pre><code># Reuse instance for multiple queries\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\nmcp = eptr.call(\"mcp\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\nsmp = eptr.call(\"smp\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\nconsumption = eptr.call(\"rt-cons\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\n</code></pre>"},{"location":"api/main/#with-custom-timeout","title":"With Custom Timeout","text":"<pre><code>df = eptr.call(\n    \"mcp\",\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    request_kwargs={\"timeout\": 30}\n)\n</code></pre>"},{"location":"api/main/#raw-json-response","title":"Raw JSON Response","text":"<pre><code>raw = eptr.call(\n    \"mcp\",\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    postprocess=False\n)\nprint(type(raw))  # dict\n</code></pre>"},{"location":"api/main/#with-organization-id","title":"With Organization ID","text":"<pre><code>df = eptr.call(\n    \"bilateral-contracts-org\",\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    org_id=123\n)\n</code></pre>"},{"location":"api/main/#error-handling","title":"Error Handling","text":"<pre><code>from eptr2 import EPTR2\n\neptr = EPTR2(use_dotenv=True)\n\ntry:\n    df = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\nexcept Exception as e:\n    print(f\"Error: {e}\")\n</code></pre>"},{"location":"api/main/#see-also","title":"See Also","text":"<ul> <li>Authentication Guide</li> <li>Basic Usage Guide</li> <li>Available API Calls</li> </ul>"},{"location":"api/mcp/","title":"MCP Server","text":"<p>The <code>eptr2.mcp</code> module provides a Model Context Protocol (MCP) server for AI agent integration.</p>"},{"location":"api/mcp/#overview","title":"Overview","text":"<p>The MCP server enables AI assistants like Claude to directly query Turkish electricity market data through a standardized protocol.</p>"},{"location":"api/mcp/#quick-start","title":"Quick Start","text":"<pre><code># Run the server\neptr2-mcp-server\n</code></pre> <p>Or programmatically:</p> <pre><code>from eptr2.mcp import run_mcp_server\nimport asyncio\n\nasyncio.run(run_mcp_server(use_dotenv=True, recycle_tgt=True))\n</code></pre>"},{"location":"api/mcp/#module-reference","title":"Module Reference","text":""},{"location":"api/mcp/#run_mcp_server","title":"run_mcp_server","text":"<p>Main entry point for the MCP server.</p> <pre><code>from eptr2.mcp import run_mcp_server\nimport asyncio\n\nasyncio.run(run_mcp_server(\n    use_dotenv=True,       # Load credentials from .env\n    recycle_tgt=True,      # Reuse TGT tickets\n    dotenv_path=\".env\",    # Path to .env file\n))\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>use_dotenv</code> <code>bool</code> <code>True</code> Load credentials from <code>.env</code> file <code>recycle_tgt</code> <code>bool</code> <code>True</code> Reuse authentication tickets <code>dotenv_path</code> <code>str</code> <code>\".env\"</code> Path to <code>.env</code> file"},{"location":"api/mcp/#available-tools","title":"Available Tools","text":"<p>The MCP server exposes these tools:</p>"},{"location":"api/mcp/#price-tools","title":"Price Tools","text":""},{"location":"api/mcp/#get_market_clearing_price","title":"get_market_clearing_price","text":"<p>Fetches Day-Ahead Market prices (MCP/PTF).</p> <pre><code>{\n  \"name\": \"get_market_clearing_price\",\n  \"arguments\": {\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#get_system_marginal_price","title":"get_system_marginal_price","text":"<p>Fetches System Marginal Prices (SMP/SMF).</p> <pre><code>{\n  \"name\": \"get_system_marginal_price\",\n  \"arguments\": {\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#get_imbalance_price","title":"get_imbalance_price","text":"<p>Fetches positive and negative imbalance prices.</p> <pre><code>{\n  \"name\": \"get_imbalance_price\",\n  \"arguments\": {\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#consumption-tools","title":"Consumption Tools","text":""},{"location":"api/mcp/#get_real_time_consumption","title":"get_real_time_consumption","text":"<p>Fetches real-time electricity consumption data.</p> <pre><code>{\n  \"name\": \"get_real_time_consumption\",\n  \"arguments\": {\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#get_demand_forecast","title":"get_demand_forecast","text":"<p>Fetches demand forecast (load plan) data.</p> <pre><code>{\n  \"name\": \"get_demand_forecast\",\n  \"arguments\": {\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#generation-tools","title":"Generation Tools","text":""},{"location":"api/mcp/#get_real_time_generation","title":"get_real_time_generation","text":"<p>Fetches real-time generation data by resource type.</p> <pre><code>{\n  \"name\": \"get_real_time_generation\",\n  \"arguments\": {\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#composite-tools","title":"Composite Tools","text":""},{"location":"api/mcp/#get_hourly_consumption_and_forecast","title":"get_hourly_consumption_and_forecast","text":"<p>Fetches combined consumption and forecast data.</p> <pre><code>{\n  \"name\": \"get_hourly_consumption_and_forecast\",\n  \"arguments\": {\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#get_price_and_cost_data","title":"get_price_and_cost_data","text":"<p>Fetches comprehensive price and cost data.</p> <pre><code>{\n  \"name\": \"get_price_and_cost_data\",\n  \"arguments\": {\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#discovery-tools","title":"Discovery Tools","text":""},{"location":"api/mcp/#get_available_eptr2_calls","title":"get_available_eptr2_calls","text":"<p>Lists all 213+ available API endpoints.</p> <pre><code>{\n  \"name\": \"get_available_eptr2_calls\",\n  \"arguments\": {}\n}\n</code></pre>"},{"location":"api/mcp/#call_eptr2_api","title":"call_eptr2_api","text":"<p>Calls any API endpoint by key.</p> <pre><code>{\n  \"name\": \"call_eptr2_api\",\n  \"arguments\": {\n    \"call_key\": \"mcp\",\n    \"start_date\": \"2024-07-29\",\n    \"end_date\": \"2024-07-29\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#claude-desktop-configuration","title":"Claude Desktop Configuration","text":"<p>Add to <code>claude_desktop_config.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"eptr2\": {\n      \"command\": \"eptr2-mcp-server\",\n      \"env\": {\n        \"EPTR_USERNAME\": \"your.email@example.com\",\n        \"EPTR_PASSWORD\": \"yourpassword\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"api/mcp/#vs-code-configuration","title":"VS Code Configuration","text":"<p>Enable MCP in VS Code settings:</p> <pre><code>{\n  \"chat.mcp.discovery.enabled\": true\n}\n</code></pre>"},{"location":"api/mcp/#environment-variables","title":"Environment Variables","text":"Variable Description <code>EPTR_USERNAME</code> EPIAS platform username (email) <code>EPTR_PASSWORD</code> EPIAS platform password <code>EPTR_TGT_PATH</code> Custom path for TGT storage"},{"location":"api/mcp/#error-handling","title":"Error Handling","text":"<p>The MCP server returns errors in a standardized format:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"authentication_error\",\n    \"message\": \"Invalid credentials\"\n  }\n}\n</code></pre>"},{"location":"api/mcp/#see-also","title":"See Also","text":"<ul> <li>MCP Server Guide</li> <li>Claude Desktop Setup</li> <li>Agent Skills</li> </ul>"},{"location":"api/util/","title":"Utilities","text":"<p>The <code>eptr2.util</code> module provides utility functions for common operations.</p>"},{"location":"api/util/#time-utilities","title":"Time Utilities","text":""},{"location":"api/util/#eptr2utiltime","title":"eptr2.util.time","text":"<p>Utility functions for time and date handling.</p> <pre><code>from eptr2.util.time import iso_to_contract\n</code></pre>"},{"location":"api/util/#iso_to_contract","title":"iso_to_contract","text":"<p>Converts ISO datetime to contract symbol format.</p> <pre><code>from eptr2.util.time import iso_to_contract\n\ncontract = iso_to_contract(\"2024-07-29T10:00:00+03:00\")\nprint(contract)  # e.g., \"PH24072910\"\n</code></pre>"},{"location":"api/util/#mapping-utilities","title":"Mapping Utilities","text":""},{"location":"api/util/#eptr2mapping","title":"eptr2.mapping","text":"<p>Utilities for API endpoint mapping and discovery.</p> <pre><code>from eptr2.mapping import (\n    get_path_map,\n    alias_to_path,\n    get_alias_map,\n)\n</code></pre>"},{"location":"api/util/#get_path_map","title":"get_path_map","text":"<p>Returns the complete mapping of API endpoint paths.</p> <pre><code>from eptr2.mapping import get_path_map\n\n# Get all path keys\npaths = get_path_map(just_call_keys=True)\nprint(len(paths))  # 213+\n</code></pre>"},{"location":"api/util/#alias_to_path","title":"alias_to_path","text":"<p>Converts an alias to its canonical path.</p> <pre><code>from eptr2.mapping import alias_to_path\n\npath = alias_to_path(\"ptf\")\nprint(path)  # \"mcp\"\n</code></pre>"},{"location":"api/util/#get_alias_map","title":"get_alias_map","text":"<p>Returns dictionary of all aliases.</p> <pre><code>from eptr2.mapping import get_alias_map\n\naliases = get_alias_map()\n# {'ptf': 'mcp', 'smf': 'smp', ...}\n</code></pre>"},{"location":"api/util/#eptr2mappinghelp","title":"eptr2.mapping.help","text":"<p>Help and documentation utilities.</p> <pre><code>from eptr2.mapping.help import get_help_d\n</code></pre>"},{"location":"api/util/#get_help_d","title":"get_help_d","text":"<p>Get documentation for an API endpoint.</p> <pre><code>from eptr2.mapping.help import get_help_d\n\n# Get help for specific call\nhelp_info = get_help_d(\"mcp\")\nprint(help_info['category'])     # \"G\u00d6P\"\nprint(help_info['title']['en'])  # \"Market Clearing Price\"\nprint(help_info['desc']['en'])   # Description\nprint(help_info['url'])          # Official docs URL\n\n# Get all help entries\nall_help = get_help_d()\n</code></pre> <p>Returns:</p> Key Type Description <code>category</code> <code>str</code> Market category (G\u00d6P, G\u0130P, etc.) <code>title</code> <code>dict</code> Titles in <code>tr</code> and <code>en</code> <code>desc</code> <code>dict</code> Descriptions in <code>tr</code> and <code>en</code> <code>url</code> <code>str</code> Link to official documentation"},{"location":"api/util/#processing-utilities","title":"Processing Utilities","text":""},{"location":"api/util/#eptr2processingpreprocess","title":"eptr2.processing.preprocess","text":"<p>Preprocessing utilities for API parameters.</p> <pre><code>from eptr2.processing.preprocess import preprocess_parameter\n</code></pre> <p>These utilities are primarily used internally by the EPTR2 class.</p>"},{"location":"api/util/#examples","title":"Examples","text":""},{"location":"api/util/#finding-api-endpoints","title":"Finding API Endpoints","text":"<pre><code>from eptr2.mapping import get_path_map, alias_to_path\n\n# List all endpoints\nall_endpoints = get_path_map(just_call_keys=True)\n\n# Find price-related endpoints\nprice_endpoints = [e for e in all_endpoints if 'price' in e.lower()]\nprint(price_endpoints)\n\n# Check if alias exists\ncanonical = alias_to_path(\"ptf\")\nprint(f\"'ptf' maps to '{canonical}'\")\n</code></pre>"},{"location":"api/util/#getting-api-documentation","title":"Getting API Documentation","text":"<pre><code>from eptr2.mapping.help import get_help_d\n\n# Get documentation for consumption endpoint\nhelp_info = get_help_d(\"rt-consumption\")\n\nprint(f\"Category: {help_info['category']}\")\nprint(f\"Title (TR): {help_info['title']['tr']}\")\nprint(f\"Title (EN): {help_info['title']['en']}\")\nprint(f\"Description: {help_info['desc']['en']}\")\n</code></pre>"},{"location":"api/util/#working-with-contract-symbols","title":"Working with Contract Symbols","text":"<pre><code>from eptr2.util.time import iso_to_contract\n\n# Convert timestamps to contract symbols\ntimestamps = [\n    \"2024-07-29T00:00:00+03:00\",\n    \"2024-07-29T12:00:00+03:00\",\n    \"2024-07-29T23:00:00+03:00\",\n]\n\nfor ts in timestamps:\n    contract = iso_to_contract(ts)\n    print(f\"{ts} -&gt; {contract}\")\n</code></pre>"},{"location":"api/util/#see-also","title":"See Also","text":"<ul> <li>EPTR2 Class Reference</li> <li>Available API Calls</li> </ul>"},{"location":"assets/","title":"Documentation Assets","text":"<p>This directory contains assets for the MkDocs documentation.</p>"},{"location":"assets/#required-files","title":"Required Files","text":"<ul> <li><code>logo.png</code> - Logo image for the documentation header (recommended: 48x48 or 64x64 pixels)</li> <li><code>favicon.ico</code> - Browser favicon</li> </ul>"},{"location":"assets/#generating-placeholder-logo","title":"Generating Placeholder Logo","text":"<p>If you don't have a logo yet, you can create a simple placeholder:</p> <pre><code># Using Pillow\nfrom PIL import Image, ImageDraw, ImageFont\n\nimg = Image.new('RGB', (64, 64), color='#4F46E5')\nd = ImageDraw.Draw(img)\nd.text((12, 16), \"E2\", fill='white')\nimg.save('logo.png')\n</code></pre> <p>Or simply use any 64x64 PNG image as a placeholder.</p>"},{"location":"getting-started/authentication/","title":"Authentication","text":"<p>eptr2 requires credentials from the EPIAS Transparency Platform to access market data.</p>"},{"location":"getting-started/authentication/#getting-credentials","title":"Getting Credentials","text":"<ol> <li>Visit the EPIAS registration page</li> <li>Complete the registration form</li> <li>Verify your email address</li> <li>Use your registration email and password as credentials</li> </ol>"},{"location":"getting-started/authentication/#authentication-methods","title":"Authentication Methods","text":""},{"location":"getting-started/authentication/#method-1-environment-file-recommended","title":"Method 1: Environment File (Recommended)","text":"<p>Create a <code>.env</code> file in your project directory:</p> .env<pre><code>EPTR_USERNAME=your.email@example.com\nEPTR_PASSWORD=yourpassword\n</code></pre> <p>Then initialize without explicit credentials:</p> <pre><code>from eptr2 import EPTR2\n\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n</code></pre> <p>TGT Recycling</p> <p>Setting <code>recycle_tgt=True</code> stores the authentication ticket locally (<code>.eptr2-tgt</code> file) and reuses it until expiration. This reduces API calls and avoids rate limiting.</p>"},{"location":"getting-started/authentication/#method-2-direct-credentials","title":"Method 2: Direct Credentials","text":"<p>Pass credentials directly (useful for quick testing):</p> <pre><code>from eptr2 import EPTR2\n\neptr = EPTR2(\n    username=\"your.email@example.com\",\n    password=\"yourpassword\"\n)\n</code></pre> <p>Security</p> <p>Never commit credentials to version control. Use environment files or environment variables instead.</p>"},{"location":"getting-started/authentication/#method-3-environment-variables","title":"Method 3: Environment Variables","text":"<p>Set system environment variables:</p> Linux/macOSWindows <pre><code>export EPTR_USERNAME=\"your.email@example.com\"\nexport EPTR_PASSWORD=\"yourpassword\"\n</code></pre> <pre><code>$env:EPTR_USERNAME = \"your.email@example.com\"\n$env:EPTR_PASSWORD = \"yourpassword\"\n</code></pre> <p>Then initialize:</p> <pre><code>from eptr2 import EPTR2\n\neptr = EPTR2()  # Automatically reads from environment\n</code></pre>"},{"location":"getting-started/authentication/#configuration-options","title":"Configuration Options","text":"<p>The <code>EPTR2</code> class accepts several authentication-related options:</p> Parameter Type Default Description <code>username</code> str None EPIAS platform username (email) <code>password</code> str None EPIAS platform password <code>use_dotenv</code> bool True Load credentials from <code>.env</code> file <code>dotenv_path</code> str \".env\" Path to the <code>.env</code> file <code>recycle_tgt</code> bool True Reuse authentication tickets <code>tgt_path</code> str \".\" Directory to store TGT file <code>force_renew_tgt</code> bool False Force renewal of TGT"},{"location":"getting-started/authentication/#tgt-ticket-granting-ticket-management","title":"TGT (Ticket Granting Ticket) Management","text":"<p>eptr2 uses a ticket-based authentication system:</p> <ol> <li>Initial Login: Credentials are exchanged for a TGT</li> <li>TGT Storage: With <code>recycle_tgt=True</code>, the TGT is saved to <code>.eptr2-tgt</code></li> <li>TGT Reuse: Subsequent calls reuse the stored TGT</li> <li>Auto Renewal: TGT is automatically renewed when expired</li> </ol> <pre><code># Custom TGT storage location\neptr = EPTR2(\n    use_dotenv=True,\n    recycle_tgt=True,\n    tgt_path=\"/path/to/store/tgt\"\n)\n</code></pre>"},{"location":"getting-started/authentication/#best-practices","title":"Best Practices","text":"<ol> <li>Use <code>.env</code> files - Keep credentials separate from code</li> <li>Enable TGT recycling - Reduces authentication overhead</li> <li>Add <code>.env</code> to <code>.gitignore</code> - Never commit credentials</li> <li>Use <code>.env.example</code> - Document required variables without values</li> </ol> <p>Example <code>.gitignore</code>:</p> <pre><code>.env\n.eptr2-tgt\n</code></pre> <p>Example <code>.env.example</code>:</p> <pre><code>EPTR_USERNAME=\nEPTR_PASSWORD=\n</code></pre>"},{"location":"getting-started/authentication/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/authentication/#username-and-password-must-be-provided","title":"\"Username and password must be provided\"","text":"<p>Ensure credentials are properly set:</p> <pre><code>import os\nprint(\"Username set:\", \"EPTR_USERNAME\" in os.environ)\nprint(\"Password set:\", \"EPTR_PASSWORD\" in os.environ)\n</code></pre>"},{"location":"getting-started/authentication/#tgt-expiration-issues","title":"TGT Expiration Issues","text":"<p>Force TGT renewal:</p> <pre><code>eptr = EPTR2(use_dotenv=True, force_renew_tgt=True)\n</code></pre>"},{"location":"getting-started/authentication/#rate-limiting","title":"Rate Limiting","text":"<p>If you encounter rate limiting, ensure <code>recycle_tgt=True</code> is set to minimize authentication requests.</p>"},{"location":"getting-started/authentication/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide</li> <li>Basic Usage</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10 or higher</li> <li>An EPIAS Transparency Platform account (Register here)</li> </ul>"},{"location":"getting-started/installation/#installation-options","title":"Installation Options","text":""},{"location":"getting-started/installation/#full-installation-recommended","title":"Full Installation (Recommended)","text":"<p>Install with all extras for the complete feature set including pandas, MCP server, and demo app:</p> pipuvpipx <pre><code>pip install \"eptr2[allextras]\"\n</code></pre> <pre><code>uv pip install \"eptr2[allextras]\"\n</code></pre> <pre><code>pipx install \"eptr2[allextras]\"\n</code></pre>"},{"location":"getting-started/installation/#minimal-installation","title":"Minimal Installation","text":"<p>For a lightweight installation with only core dependencies:</p> pipuv <pre><code>pip install eptr2\n</code></pre> <pre><code>uv pip install eptr2\n</code></pre>"},{"location":"getting-started/installation/#optional-dependencies","title":"Optional Dependencies","text":"Extra Description Includes <code>dataframe</code> DataFrame support pandas <code>mcp</code> AI agent integration pandas, fastmcp <code>allextras</code> All features pandas, streamlit, fastmcp, openpyxl, xlsxwriter <code>dev</code> Development tools pytest <p>Install specific extras:</p> <pre><code>pip install \"eptr2[dataframe]\"  # Just pandas support\npip install \"eptr2[mcp]\"        # AI agent features\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>After installation, verify it works:</p> <pre><code>import eptr2\nprint(eptr2.__version__ if hasattr(eptr2, '__version__') else \"Installed!\")\n</code></pre> <p>Or check available calls:</p> <pre><code>from eptr2 import EPTR2\neptr = EPTR2(username=\"your@email.com\", password=\"yourpassword\")\nprint(f\"Available calls: {len(eptr.get_available_calls())}\")\n</code></pre>"},{"location":"getting-started/installation/#upgrading","title":"Upgrading","text":"<p>To upgrade to the latest version:</p> <pre><code>pip install --upgrade \"eptr2[allextras]\"\n</code></pre>"},{"location":"getting-started/installation/#development-installation","title":"Development Installation","text":"<p>For contributing to eptr2:</p> <pre><code>git clone https://github.com/Tideseed/eptr2.git\ncd eptr2\npip install -e \".[dev,allextras]\"\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#ssl-certificate-errors","title":"SSL Certificate Errors","text":"<p>If you encounter SSL certificate errors, you can disable SSL verification (not recommended for production):</p> <pre><code>eptr = EPTR2(username=\"...\", password=\"...\", ssl_verify=False)\n</code></pre>"},{"location":"getting-started/installation/#import-errors","title":"Import Errors","text":"<p>If you see import errors for pandas or other optional dependencies, ensure you installed with the appropriate extras:</p> <pre><code>pip install \"eptr2[allextras]\"\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Set up authentication</li> <li>Make your first API call</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>This guide will help you make your first API call with eptr2.</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<ol> <li>Install eptr2</li> <li>Set up authentication</li> </ol>"},{"location":"getting-started/quickstart/#your-first-api-call","title":"Your First API Call","text":"<pre><code>from eptr2 import EPTR2\n\n# Initialize the client\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Get Market Clearing Price (MCP/PTF)\ndf = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\nprint(df)\n</code></pre> <p>Output:</p> <pre><code>                       date    price\n0   2024-07-29T00:00:00+03:00  1234.56\n1   2024-07-29T01:00:00+03:00  1198.23\n...\n23  2024-07-29T23:00:00+03:00  1156.78\n</code></pre>"},{"location":"getting-started/quickstart/#understanding-the-call-method","title":"Understanding the <code>call</code> Method","text":"<p>The <code>call</code> method is the primary way to fetch data:</p> <pre><code>result = eptr.call(\n    key,           # API endpoint name (e.g., \"mcp\", \"smp\", \"rt-consumption\")\n    start_date,    # Start date in \"YYYY-MM-DD\" format\n    end_date,      # End date in \"YYYY-MM-DD\" format\n    **kwargs       # Additional parameters (varies by endpoint)\n)\n</code></pre>"},{"location":"getting-started/quickstart/#common-api-calls","title":"Common API Calls","text":""},{"location":"getting-started/quickstart/#prices","title":"Prices","text":"<pre><code># Market Clearing Price (MCP/PTF)\nmcp = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# System Marginal Price (SMP/SMF)\nsmp = eptr.call(\"smp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Imbalance Prices\nimbalance = eptr.call(\"imbalance-price\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"getting-started/quickstart/#consumption-generation","title":"Consumption &amp; Generation","text":"<pre><code># Real-time Consumption\nconsumption = eptr.call(\"rt-cons\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Real-time Generation by Source\ngeneration = eptr.call(\"rt-generation\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Load Plan (Demand Forecast)\nload_plan = eptr.call(\"load-plan\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"getting-started/quickstart/#production-data","title":"Production Data","text":"<pre><code># Daily Production Plan (KG\u00dcP)\ndpp = eptr.call(\"dpp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Generation Forecast (UEVM)\nuevm = eptr.call(\"uevm\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"getting-started/quickstart/#discovering-available-calls","title":"Discovering Available Calls","text":"<p>List all 213+ available API endpoints:</p> <pre><code># Get list of all available calls\ncalls = eptr.get_available_calls()\nprint(f\"Total available calls: {len(calls)}\")\n\n# View first 10 calls\nfor call in calls[:10]:\n    print(call)\n</code></pre> <p>Search for specific calls:</p> <pre><code># Find calls related to price\nprice_calls = [c for c in calls if 'price' in c.lower()]\nprint(price_calls)\n</code></pre>"},{"location":"getting-started/quickstart/#using-composite-functions","title":"Using Composite Functions","text":"<p>Composite functions combine multiple API calls for common analysis tasks:</p> <pre><code>from eptr2.composite import (\n    get_hourly_consumption_and_forecast_data,\n    get_hourly_price_and_cost_data\n)\n\n# Get consumption with forecast\nconsumption_df = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n\n# Get comprehensive price data\nprice_df = get_hourly_price_and_cost_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre>"},{"location":"getting-started/quickstart/#date-format","title":"Date Format","text":"<p>Always use ISO format for dates: <code>YYYY-MM-DD</code></p> <pre><code># Correct\ndf = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Also correct - same day queries\ndf = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Date ranges\ndf = eptr.call(\"mcp\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\n</code></pre>"},{"location":"getting-started/quickstart/#return-types","title":"Return Types","text":"<p>By default, eptr2 returns pandas DataFrames (if pandas is installed):</p> <pre><code>df = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\nprint(type(df))  # &lt;class 'pandas.core.frame.DataFrame'&gt;\n</code></pre> <p>Get raw JSON response:</p> <pre><code>raw = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\", postprocess=False)\nprint(type(raw))  # &lt;class 'dict'&gt;\n</code></pre>"},{"location":"getting-started/quickstart/#error-handling","title":"Error Handling","text":"<pre><code>try:\n    df = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\nexcept Exception as e:\n    print(f\"Error: {e}\")\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Explore Basic Usage</li> <li>Learn about Composite Functions</li> <li>Set up AI Integration</li> <li>Browse API Reference</li> </ul>"},{"location":"includes/abbreviations/","title":"Abbreviations","text":"<p>*EPTR: Electricity Price Transparency Reader *MCP: Market Clearing Price *SMP: System Marginal Price *PTF: Piyasa Takas Fiyat\u0131 *SMF: Sistem Marjinal Fiyat\u0131 *UE\u00c7M: Uzla\u015ft\u0131rmaya Esas \u00c7eki\u015f Miktar\u0131 *UEVM: Uzla\u015ft\u0131rmaya Esas Veri\u015f Miktar\u0131 *KG\u00dcP: Kesinle\u015fmi\u015f G\u00fcnl\u00fck \u00dcretim Plan\u0131 *K\u00dcPST: Kesinle\u015fmi\u015f \u00dcretim Plan\u0131ndan Sapma Tutar\u0131 *G\u00d6P: G\u00fcn \u00d6ncesi Piyasas\u0131 *G\u0130P: G\u00fcn \u0130\u00e7i Piyasas\u0131 *DGP: Dengeleme G\u00fc\u00e7 Piyasas\u0131 *YAL: Y\u00fck Alma *YAT: Y\u00fck Atma *EPIAS: Enerji Piyasalar\u0131 \u0130\u015fletme A.\u015e. *TGT: Ticket Granting Ticket *MWh: Megawatt-hour *TL: Turkish Lira</p>"},{"location":"reference/abbreviations/","title":"Common Abbreviations","text":"<p>The Turkish electricity market uses many abbreviations, both in Turkish and English. This reference helps you understand the terminology.</p>"},{"location":"reference/abbreviations/#price-terms","title":"Price Terms","text":"Abbreviation Turkish English Description PTF Piyasa Takas Fiyat\u0131 Market Clearing Price (MCP) Day-ahead market price SMF Sistem Marjinal Fiyat\u0131 System Marginal Price (SMP) Real-time balancing price AOF A\u011f\u0131rl\u0131kl\u0131 Ortalama Fiyat Weighted Average Price (WAP) Volume-weighted average G\u00d6P Fiyat\u0131 G\u00fcn \u00d6ncesi Piyasas\u0131 Fiyat\u0131 Day-Ahead Market Price = PTF G\u0130P Fiyat\u0131 G\u00fcn \u0130\u00e7i Piyasas\u0131 Fiyat\u0131 Intraday Market Price Intraday trading price"},{"location":"reference/abbreviations/#consumption-generation","title":"Consumption &amp; Generation","text":"Abbreviation Turkish English Description UE\u00c7M Uzla\u015ft\u0131rmaya Esas \u00c7eki\u015f Miktar\u0131 Settlement Actual Consumption Official consumption for settlement UEVM Uzla\u015ft\u0131rmaya Esas Veri\u015f Miktar\u0131 Settlement Actual Generation Official generation for settlement KG\u00dcP Kesinle\u015fmi\u015f G\u00fcnl\u00fck \u00dcretim Plan\u0131 Finalized Daily Production Plan Final daily production schedule KUD\u00dcP Kesinle\u015fmi\u015f Uzla\u015ft\u0131rma D\u00f6nemi \u00dcretim Plan\u0131 Finalized Settlement Period Production Plan Production plan for settlement"},{"location":"reference/abbreviations/#market-names","title":"Market Names","text":"Abbreviation Turkish English Description G\u00d6P G\u00fcn \u00d6ncesi Piyasas\u0131 Day-Ahead Market (DAM) Market for next-day delivery G\u0130P G\u00fcn \u0130\u00e7i Piyasas\u0131 Intraday Market (IDM) Same-day trading market DGP Dengeleme G\u00fc\u00e7 Piyasas\u0131 Balancing Power Market (BPM) Real-time balancing market"},{"location":"reference/abbreviations/#balancing-imbalance","title":"Balancing &amp; Imbalance","text":"Abbreviation Turkish English Description YAL Y\u00fck Alma Up Regulation Increasing generation/decreasing consumption YAT Y\u00fck Atma Down Regulation Decreasing generation/increasing consumption K\u00dcPST Kesinle\u015fmi\u015f \u00dcretim Plan\u0131ndan Sapma Tutar\u0131 Production Plan Deviation Cost Cost for deviating from production plan DSG Dengeden Sorumlu Grup Balance Responsible Party Entity responsible for imbalances"},{"location":"reference/abbreviations/#organizations-systems","title":"Organizations &amp; Systems","text":"Abbreviation Turkish English Description EP\u0130A\u015e Enerji Piyasalar\u0131 \u0130\u015fletme A.\u015e. Energy Markets Operating Inc. Market operator TE\u0130A\u015e T\u00fcrkiye Elektrik \u0130letim A.\u015e. Turkish Electricity Transmission Corp. Transmission system operator E\u00dcA\u015e Elektrik \u00dcretim A.\u015e. Electricity Generation Corp. State generation company TEDA\u015e T\u00fcrkiye Elektrik Da\u011f\u0131t\u0131m A.\u015e. Turkish Electricity Distribution Corp. Distribution company YEKDEM Yenilenebilir Enerji Kaynaklar\u0131 Destekleme Mekanizmas\u0131 Renewable Energy Resources Support Mechanism Feed-in tariff system"},{"location":"reference/abbreviations/#technical-terms","title":"Technical Terms","text":"Abbreviation Turkish English Description UEVCB Uzla\u015ft\u0131rmaya Esas Veri\u015f \u00c7eki\u015f Birimi Settlement Metering Point Metering unit for settlement \u0130A \u0130kili Anla\u015fma Bilateral Agreement Direct contracts between parties SFK Sekonder Frekans Kontrol Secondary Frequency Control Frequency regulation service PFK Primer Frekans Kontrol Primary Frequency Control Automatic frequency response"},{"location":"reference/abbreviations/#units","title":"Units","text":"Unit Description MWh Megawatt-hour (energy) MW Megawatt (power/capacity) TL Turkish Lira (currency) TL/MWh Price per megawatt-hour"},{"location":"reference/abbreviations/#common-api-call-keys","title":"Common API Call Keys","text":"Key Full Form Description <code>mcp</code> / <code>ptf</code> Market Clearing Price Day-ahead price <code>smp</code> / <code>smf</code> System Marginal Price Real-time price <code>rt-cons</code> Real-Time Consumption Live consumption <code>rt-generation</code> Real-Time Generation Live generation <code>load-plan</code> Load Plan Demand forecast <code>dpp</code> / <code>kgup</code> Daily Production Plan Generation schedule <code>uevm</code> UEVM Settlement generation <code>uecm</code> UE\u00c7M Settlement consumption <code>imbalance-price</code> Imbalance Price Imbalance prices"},{"location":"reference/abbreviations/#see-also","title":"See Also","text":"<ul> <li>Available API Calls</li> <li>Calculator App</li> </ul>"},{"location":"reference/changelog/","title":"Changelog","text":"<p>All notable changes to eptr2 are documented here.</p>"},{"location":"reference/changelog/#version-134-development","title":"Version 1.3.4 (Development)","text":""},{"location":"reference/changelog/#added","title":"Added","text":"<ul> <li>MkDocs documentation with Material theme</li> <li>GitHub Pages deployment workflow</li> </ul>"},{"location":"reference/changelog/#changed","title":"Changed","text":"<ul> <li>Documentation improvements</li> </ul>"},{"location":"reference/changelog/#version-133","title":"Version 1.3.3","text":""},{"location":"reference/changelog/#important","title":"Important","text":"<ul> <li>Breaking changes due to regulatory changes by EPDK</li> <li>Overhaul planned for version 1.4.0</li> </ul>"},{"location":"reference/changelog/#changed_1","title":"Changed","text":"<ul> <li>Updated API mappings for regulatory compliance</li> </ul>"},{"location":"reference/changelog/#version-130","title":"Version 1.3.0","text":""},{"location":"reference/changelog/#added_1","title":"Added","text":"<ul> <li>MCP (Model Context Protocol) server for AI agent integration</li> <li>Claude Desktop integration support</li> <li>Agent skills for specialized domain queries</li> </ul>"},{"location":"reference/changelog/#changed_2","title":"Changed","text":"<ul> <li>eptr2 now evolves to be an AI-oriented tool</li> </ul>"},{"location":"reference/changelog/#version-124","title":"Version 1.2.4","text":""},{"location":"reference/changelog/#critical","title":"Critical","text":"<ul> <li>Authentication method changes require update to 1.2.4+</li> </ul>"},{"location":"reference/changelog/#added_2","title":"Added","text":"<ul> <li>MCP server module (<code>eptr2.mcp</code>)</li> <li><code>eptr2-mcp-server</code> command-line entry point</li> </ul>"},{"location":"reference/changelog/#fixed","title":"Fixed","text":"<ul> <li>Authentication handling improvements</li> </ul>"},{"location":"reference/changelog/#version-123","title":"Version 1.2.3","text":""},{"location":"reference/changelog/#added_3","title":"Added","text":"<ul> <li><code>.env</code> file support for credentials</li> <li>TGT (Ticket Granting Ticket) recycling</li> <li><code>use_dotenv</code> parameter</li> <li><code>recycle_tgt</code> parameter</li> <li><code>.eptr2-tgt</code> file for TGT storage</li> </ul>"},{"location":"reference/changelog/#changed_3","title":"Changed","text":"<ul> <li>Improved credential management</li> </ul>"},{"location":"reference/changelog/#version-120","title":"Version 1.2.0","text":""},{"location":"reference/changelog/#added_4","title":"Added","text":"<ul> <li>Composite functions module</li> <li><code>get_hourly_consumption_and_forecast_data</code></li> <li><code>get_hourly_price_and_cost_data</code></li> </ul>"},{"location":"reference/changelog/#changed_4","title":"Changed","text":"<ul> <li>Enhanced DataFrame postprocessing</li> </ul>"},{"location":"reference/changelog/#version-110","title":"Version 1.1.0","text":""},{"location":"reference/changelog/#added_5","title":"Added","text":"<ul> <li>New login method with automatic TGT management</li> <li><code>eptr_w_tgt_wrapper</code> function</li> <li><code>generate_eptr2_credentials_file</code> utility</li> </ul>"},{"location":"reference/changelog/#deprecated","title":"Deprecated","text":"<ul> <li>Direct credentials file path (use <code>.env</code> instead)</li> </ul>"},{"location":"reference/changelog/#version-102","title":"Version 1.0.2","text":""},{"location":"reference/changelog/#added_6","title":"Added","text":"<ul> <li>Calculator tutorial app (<code>run_calc_app</code>)</li> <li>Imbalance cost calculation helpers</li> </ul>"},{"location":"reference/changelog/#version-100","title":"Version 1.0.0","text":""},{"location":"reference/changelog/#added_7","title":"Added","text":"<ul> <li>Initial stable release</li> <li>213+ API endpoints</li> <li>Pandas DataFrame integration</li> <li>Streamlit demo app</li> <li>Live tutorial feature</li> </ul>"},{"location":"reference/changelog/#core-features","title":"Core Features","text":"<ul> <li>EPTR2 class for API access</li> <li>Automatic authentication</li> <li>Response postprocessing</li> <li>Call discovery methods</li> </ul>"},{"location":"reference/changelog/#migration-guides","title":"Migration Guides","text":""},{"location":"reference/changelog/#migrating-from-12x-to-13x","title":"Migrating from 1.2.x to 1.3.x","text":"<ol> <li> <p>Update authentication:    <pre><code># Old\neptr = EPTR2(username=\"...\", password=\"...\")\n\n# New (recommended)\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n</code></pre></p> </li> <li> <p>Create <code>.env</code> file:    <pre><code>EPTR_USERNAME=your.email@example.com\nEPTR_PASSWORD=yourpassword\n</code></pre></p> </li> </ol>"},{"location":"reference/changelog/#migrating-from-11x-to-12x","title":"Migrating from 1.1.x to 1.2.x","text":"<ol> <li>Replace credentials file with <code>.env</code>:    <pre><code># Old\neptr = EPTR2(credentials_file_path=\"creds/eptr_credentials.json\")\n\n# New\neptr = EPTR2(use_dotenv=True)\n</code></pre></li> </ol>"},{"location":"reference/changelog/#roadmap","title":"Roadmap","text":""},{"location":"reference/changelog/#version-140-planned","title":"Version 1.4.0 (Planned)","text":"<ul> <li>Complete overhaul for EPDK regulatory changes</li> <li>Enhanced composite functions</li> <li>Improved documentation</li> </ul>"},{"location":"reference/changelog/#see-also","title":"See Also","text":"<ul> <li>GitHub Releases</li> <li>PyPI Package</li> </ul>"},{"location":"reference/contributing/","title":"Contributing","text":"<p>Thank you for your interest in contributing to eptr2! This guide will help you get started.</p>"},{"location":"reference/contributing/#getting-started","title":"Getting Started","text":""},{"location":"reference/contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10 or higher</li> <li>Git</li> <li>uv or pip</li> </ul>"},{"location":"reference/contributing/#development-setup","title":"Development Setup","text":"<ol> <li> <p>Fork the repository on GitHub</p> </li> <li> <p>Clone your fork:    <pre><code>git clone https://github.com/YOUR_USERNAME/eptr2.git\ncd eptr2\n</code></pre></p> </li> <li> <p>Create a virtual environment:    <pre><code>python -m venv .venv\nsource .venv/bin/activate  # Linux/macOS\n# or\n.venv\\Scripts\\activate  # Windows\n</code></pre></p> </li> <li> <p>Install development dependencies:    <pre><code>pip install -e \".[dev,allextras]\"\n</code></pre></p> </li> <li> <p>Set up credentials:    <pre><code>cp .env.example .env\n# Edit .env with your EPIAS credentials\n</code></pre></p> </li> </ol>"},{"location":"reference/contributing/#development-workflow","title":"Development Workflow","text":""},{"location":"reference/contributing/#running-tests","title":"Running Tests","text":"<pre><code>pytest\n</code></pre> <p>Run specific tests:</p> <pre><code>pytest tests/test_costs.py -v\n</code></pre>"},{"location":"reference/contributing/#code-style","title":"Code Style","text":"<p>We follow PEP 8 with some modifications. Use ruff for linting:</p> <pre><code>ruff check src/\n</code></pre>"},{"location":"reference/contributing/#type-hints","title":"Type Hints","text":"<p>Use type hints for all public functions:</p> <pre><code>def get_data(start_date: str, end_date: str) -&gt; pd.DataFrame:\n    ...\n</code></pre>"},{"location":"reference/contributing/#making-changes","title":"Making Changes","text":""},{"location":"reference/contributing/#branch-naming","title":"Branch Naming","text":"<ul> <li><code>feature/description</code> - New features</li> <li><code>fix/description</code> - Bug fixes</li> <li><code>docs/description</code> - Documentation updates</li> <li><code>refactor/description</code> - Code refactoring</li> </ul>"},{"location":"reference/contributing/#commit-messages","title":"Commit Messages","text":"<p>Follow conventional commits:</p> <pre><code>type(scope): description\n\nfeat(composite): add new consumption function\nfix(auth): handle expired TGT correctly\ndocs(api): update EPTR2 class documentation\n</code></pre>"},{"location":"reference/contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li> <p>Create a feature branch:    <pre><code>git checkout -b feature/my-feature\n</code></pre></p> </li> <li> <p>Make your changes and commit:    <pre><code>git add .\ngit commit -m \"feat(scope): description\"\n</code></pre></p> </li> <li> <p>Push to your fork:    <pre><code>git push origin feature/my-feature\n</code></pre></p> </li> <li> <p>Open a Pull Request on GitHub</p> </li> <li> <p>Wait for review and address feedback</p> </li> </ol>"},{"location":"reference/contributing/#adding-new-api-endpoints","title":"Adding New API Endpoints","text":""},{"location":"reference/contributing/#1-update-mapping","title":"1. Update Mapping","text":"<p>Add the new endpoint to <code>src/eptr2/mapping/</code>:</p> <pre><code># In path_map.py or similar\n\"new-endpoint\": {\n    \"path\": \"/api/v2/new-endpoint\",\n    \"method\": \"GET\",\n    \"required_params\": [\"start_date\", \"end_date\"],\n}\n</code></pre>"},{"location":"reference/contributing/#2-add-help-documentation","title":"2. Add Help Documentation","text":"<p>Update <code>src/eptr2/mapping/help.py</code>:</p> <pre><code>\"new-endpoint\": {\n    \"category\": \"Category\",\n    \"title\": {\"tr\": \"T\u00fcrk\u00e7e Ba\u015fl\u0131k\", \"en\": \"English Title\"},\n    \"desc\": {\"tr\": \"A\u00e7\u0131klama\", \"en\": \"Description\"},\n    \"url\": \"https://seffaflik.epias.com.tr/...\"\n}\n</code></pre>"},{"location":"reference/contributing/#3-add-tests","title":"3. Add Tests","text":"<p>Create tests in <code>tests/</code>:</p> <pre><code>def test_new_endpoint():\n    eptr = EPTR2(use_dotenv=True)\n    result = eptr.call(\"new-endpoint\", start_date=\"2024-01-01\", end_date=\"2024-01-01\")\n    assert not result.empty\n</code></pre>"},{"location":"reference/contributing/#documentation","title":"Documentation","text":""},{"location":"reference/contributing/#building-docs-locally","title":"Building Docs Locally","text":"<pre><code>pip install mkdocs-material mkdocstrings[python]\nmkdocs serve\n</code></pre> <p>Visit <code>http://localhost:8000</code> to preview.</p>"},{"location":"reference/contributing/#documentation-style","title":"Documentation Style","text":"<ul> <li>Use clear, concise language</li> <li>Include code examples</li> <li>Add type hints in docstrings</li> <li>Cross-reference related topics</li> </ul>"},{"location":"reference/contributing/#docstring-format","title":"Docstring Format","text":"<p>Use Google-style docstrings:</p> <pre><code>def function(param1: str, param2: int) -&gt; pd.DataFrame:\n    \"\"\"Short description.\n\n    Longer description if needed.\n\n    Args:\n        param1: Description of param1.\n        param2: Description of param2.\n\n    Returns:\n        Description of return value.\n\n    Raises:\n        ValueError: When something is wrong.\n\n    Example:\n        &gt;&gt;&gt; result = function(\"test\", 123)\n        &gt;&gt;&gt; print(result)\n    \"\"\"\n</code></pre>"},{"location":"reference/contributing/#reporting-issues","title":"Reporting Issues","text":""},{"location":"reference/contributing/#bug-reports","title":"Bug Reports","text":"<p>Include: - eptr2 version - Python version - Operating system - Minimal reproducible example - Expected vs actual behavior - Full error traceback</p>"},{"location":"reference/contributing/#feature-requests","title":"Feature Requests","text":"<p>Include: - Use case description - Proposed solution - Alternative solutions considered</p>"},{"location":"reference/contributing/#code-of-conduct","title":"Code of Conduct","text":"<ul> <li>Be respectful and inclusive</li> <li>Focus on constructive feedback</li> <li>Help others learn</li> </ul>"},{"location":"reference/contributing/#questions","title":"Questions?","text":"<ul> <li>Open a GitHub Issue</li> <li>Check existing issues first</li> <li>Provide context and examples</li> </ul>"},{"location":"reference/contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the Apache License 2.0.</p>"},{"location":"reference/contributing/#see-also","title":"See Also","text":"<ul> <li>GitHub Repository</li> <li>Issue Tracker</li> </ul>"},{"location":"tutorials/calculator/","title":"Calculator App","text":"<p>The calculator tutorial app helps you estimate imbalance and K\u00dcPST (deviation) costs for any date and hour.</p>"},{"location":"tutorials/calculator/#running-the-calculator","title":"Running the Calculator","text":""},{"location":"tutorials/calculator/#prerequisites","title":"Prerequisites","text":"<p>Install eptr2 with all extras:</p> <pre><code>pip install \"eptr2[allextras]\"\n</code></pre>"},{"location":"tutorials/calculator/#launch","title":"Launch","text":"<pre><code>from eptr2.tutorials import run_calc_app\n\nrun_calc_app(\n    username=\"your.email@example.com\",\n    password=\"yourpassword\"\n)\n</code></pre> <p>Or with <code>.env</code> credentials:</p> <pre><code>from eptr2.tutorials import run_calc_app\n\nrun_calc_app()  # Uses EPTR_USERNAME and EPTR_PASSWORD\n</code></pre>"},{"location":"tutorials/calculator/#features","title":"Features","text":""},{"location":"tutorials/calculator/#imbalance-cost-calculation","title":"Imbalance Cost Calculation","text":"<p>Calculate costs for energy imbalances:</p> <ul> <li>Input your actual vs. forecast energy</li> <li>Select date and hour</li> <li>Get positive/negative imbalance costs</li> </ul>"},{"location":"tutorials/calculator/#kupst-deviation-cost","title":"K\u00dcPST (Deviation Cost)","text":"<p>Calculate production plan deviation costs:</p> <ul> <li>Input planned vs. actual production</li> <li>Account for tolerance bands</li> <li>Calculate settlement costs</li> </ul>"},{"location":"tutorials/calculator/#interactive-interface","title":"Interactive Interface","text":"<ul> <li>Real-time price data lookup</li> <li>Visual cost breakdown</li> <li>Export calculations</li> </ul>"},{"location":"tutorials/calculator/#understanding-imbalance-costs","title":"Understanding Imbalance Costs","text":""},{"location":"tutorials/calculator/#positive-imbalance-energy-surplus","title":"Positive Imbalance (Energy Surplus)","text":"<p>When you produce more than planned or consume less:</p> \\[\\text{Cost} = \\text{Surplus (MWh)} \\times \\text{Negative Imbalance Price (TL/MWh)}\\]"},{"location":"tutorials/calculator/#negative-imbalance-energy-deficit","title":"Negative Imbalance (Energy Deficit)","text":"<p>When you produce less than planned or consume more:</p> \\[\\text{Cost} = \\text{Deficit (MWh)} \\times \\text{Positive Imbalance Price (TL/MWh)}\\]"},{"location":"tutorials/calculator/#kupst-formula","title":"K\u00dcPST Formula","text":"<p>K\u00dcPST (Kesinle\u015fmi\u015f \u00dcretim Plan\u0131ndan Sapma Tutar\u0131) is calculated as:</p> \\[\\text{K\u00dcPST} = |\\text{Deviation}| \\times \\max(0, \\text{SMF} - \\text{PTF})\\] <p>Where:</p> <ul> <li>Deviation = Actual - Planned (within tolerance)</li> <li>SMF = System Marginal Price</li> <li>PTF = Market Clearing Price</li> </ul>"},{"location":"tutorials/calculator/#example-calculation","title":"Example Calculation","text":"<pre><code># Scenario: 100 MWh deficit on 2024-07-29 at 14:00\n# Positive imbalance price: 1500 TL/MWh\n\ndeficit = 100  # MWh\nprice = 1500   # TL/MWh\n\ncost = deficit * price\nprint(f\"Imbalance cost: {cost:,.2f} TL\")  # 150,000.00 TL\n</code></pre>"},{"location":"tutorials/calculator/#using-programmatically","title":"Using Programmatically","text":"<p>For programmatic cost calculations without the UI:</p> <pre><code>from eptr2 import EPTR2\nfrom eptr2.composite import get_imbalance_data\n\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Get imbalance prices\nimbalance = eptr.call(\n    \"imbalance-price\",\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\"\n)\n\n# Calculate costs\ndeficit = 100  # Your deficit in MWh\nhour_14 = imbalance[imbalance['date'].dt.hour == 14].iloc[0]\ncost = deficit * hour_14['positiveImbalancePrice']\nprint(f\"Cost for 100 MWh deficit at 14:00: {cost:,.2f} TL\")\n</code></pre>"},{"location":"tutorials/calculator/#configuration","title":"Configuration","text":""},{"location":"tutorials/calculator/#custom-port","title":"Custom Port","text":"<pre><code>from eptr2.tutorials import run_calc_app\n\nrun_calc_app(port=8503)\n</code></pre>"},{"location":"tutorials/calculator/#see-also","title":"See Also","text":"<ul> <li>Demo App</li> <li>Imbalance Costs Guide</li> <li>Common Abbreviations</li> </ul>"},{"location":"tutorials/demo-app/","title":"Demo App","text":"<p>eptr2 includes a built-in Streamlit demo app for exploring Turkish electricity market data interactively.</p>"},{"location":"tutorials/demo-app/#online-demo","title":"Online Demo","text":"<p>Visit the live demo at: https://eptr2demo.streamlit.app/</p>"},{"location":"tutorials/demo-app/#running-locally","title":"Running Locally","text":""},{"location":"tutorials/demo-app/#prerequisites","title":"Prerequisites","text":"<p>Install eptr2 with all extras:</p> <pre><code>pip install \"eptr2[allextras]\"\n</code></pre>"},{"location":"tutorials/demo-app/#command-line","title":"Command Line","text":"<p>Run the demo app from the terminal:</p> <pre><code>eptr2demo\n</code></pre>"},{"location":"tutorials/demo-app/#programmatic","title":"Programmatic","text":"<pre><code>from eptr2.tutorials import run_demo_app\n\nrun_demo_app(\n    username=\"your.email@example.com\",\n    password=\"yourpassword\"\n)\n</code></pre> <p>Or with <code>.env</code> file credentials:</p> <pre><code>from eptr2.tutorials import run_demo_app\n\nrun_demo_app()  # Will use EPTR_USERNAME and EPTR_PASSWORD from .env\n</code></pre>"},{"location":"tutorials/demo-app/#features","title":"Features","text":"<p>The demo app provides:</p>"},{"location":"tutorials/demo-app/#data-explorer","title":"Data Explorer","text":"<ul> <li>Browse all 213+ API endpoints</li> <li>Filter by category</li> <li>View data in tables</li> <li>Download as CSV</li> </ul>"},{"location":"tutorials/demo-app/#visualizations","title":"Visualizations","text":"<ul> <li>Interactive charts</li> <li>Time series plots</li> <li>Price comparisons</li> <li>Generation mix</li> </ul>"},{"location":"tutorials/demo-app/#quick-queries","title":"Quick Queries","text":"<ul> <li>Pre-built common queries</li> <li>Date range selection</li> <li>Real-time data</li> </ul>"},{"location":"tutorials/demo-app/#screenshots","title":"Screenshots","text":"<p>Coming Soon</p> <p>Screenshots will be added in a future update.</p>"},{"location":"tutorials/demo-app/#configuration","title":"Configuration","text":""},{"location":"tutorials/demo-app/#custom-port","title":"Custom Port","text":"<pre><code>from eptr2.tutorials import run_demo_app\n\nrun_demo_app(\n    port=8502  # Default is 8501\n)\n</code></pre>"},{"location":"tutorials/demo-app/#custom-theme","title":"Custom Theme","text":"<p>The demo app uses Streamlit's theming. Create <code>.streamlit/config.toml</code>:</p> <pre><code>[theme]\nprimaryColor = \"#4F46E5\"\nbackgroundColor = \"#FFFFFF\"\nsecondaryBackgroundColor = \"#F3F4F6\"\ntextColor = \"#111827\"\n</code></pre>"},{"location":"tutorials/demo-app/#troubleshooting","title":"Troubleshooting","text":""},{"location":"tutorials/demo-app/#streamlit-not-found","title":"Streamlit Not Found","text":"<p>Ensure you installed with extras:</p> <pre><code>pip install \"eptr2[allextras]\"\n</code></pre>"},{"location":"tutorials/demo-app/#authentication-errors","title":"Authentication Errors","text":"<p>Check your credentials:</p> <pre><code>from eptr2 import EPTR2\n\n# Test credentials\neptr = EPTR2(username=\"...\", password=\"...\")\nprint(eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\"))\n</code></pre>"},{"location":"tutorials/demo-app/#port-already-in-use","title":"Port Already in Use","text":"<p>Try a different port:</p> <pre><code>streamlit run --server.port 8502 ...\n</code></pre>"},{"location":"tutorials/demo-app/#see-also","title":"See Also","text":"<ul> <li>Calculator App</li> <li>Quick Start Guide</li> </ul>"},{"location":"user-guide/api-calls/","title":"Available API Calls","text":"<p>eptr2 provides access to 213+ API endpoints for Turkish electricity market data. This page lists the most commonly used calls organized by category.</p>"},{"location":"user-guide/api-calls/#price-data","title":"Price Data","text":""},{"location":"user-guide/api-calls/#day-ahead-market-prices","title":"Day-Ahead Market Prices","text":"Call Key Alias Description <code>mcp</code> <code>ptf</code> Market Clearing Price (Piyasa Takas Fiyat\u0131) <code>smp</code> <code>smf</code> System Marginal Price (Sistem Marjinal Fiyat\u0131) <code>imbalance-price</code> - Positive and negative imbalance prices <code>wap</code> <code>aof</code> Weighted Average Price (A\u011f\u0131rl\u0131kl\u0131 Ortalama Fiyat) <pre><code># Market Clearing Price\nmcp = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# System Marginal Price  \nsmp = eptr.call(\"smp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Imbalance prices\nimbalance = eptr.call(\"imbalance-price\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"user-guide/api-calls/#intraday-market-prices","title":"Intraday Market Prices","text":"Call Key Description <code>idm-wap</code> Intraday market weighted average price <code>idm-volume</code> Intraday market volume <code>idm-summary</code> Intraday market summary"},{"location":"user-guide/api-calls/#consumption-data","title":"Consumption Data","text":"Call Key Alias Description <code>rt-consumption</code> <code>rt-cons</code> Real-time electricity consumption <code>uecm</code> - Settlement consumption (Uzla\u015ft\u0131rmaya Esas \u00c7eki\u015f Miktar\u0131) <code>load-plan</code> - Demand forecast <pre><code># Real-time consumption\nconsumption = eptr.call(\"rt-cons\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Settlement consumption\nuecm = eptr.call(\"uecm\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Load forecast\nforecast = eptr.call(\"load-plan\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"user-guide/api-calls/#generation-data","title":"Generation Data","text":""},{"location":"user-guide/api-calls/#aggregate-generation","title":"Aggregate Generation","text":"Call Key Description <code>rt-generation</code> Real-time generation by resource type <code>uevm</code> Settlement generation (Uzla\u015ft\u0131rmaya Esas Veri\u015f Miktar\u0131) <pre><code># Real-time generation by fuel type\ngeneration = eptr.call(\"rt-generation\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Settlement generation\nuevm = eptr.call(\"uevm\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"user-guide/api-calls/#plant-level-data","title":"Plant-Level Data","text":"Call Key Description <code>dpp-pp-list</code> List of power plants <code>rt-gen</code> Real-time generation by plant <code>dpp</code> / <code>kgup</code> Daily production plan <code>aic</code> Available installed capacity <pre><code># Get list of power plants\nplants = eptr.call(\"dpp-pp-list\")\n\n# Daily production plan\ndpp = eptr.call(\"dpp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"user-guide/api-calls/#market-operations","title":"Market Operations","text":""},{"location":"user-guide/api-calls/#day-ahead-market-gop","title":"Day-Ahead Market (G\u00d6P)","text":"Call Key Description <code>dam-volume</code> Day-ahead market volume <code>dam-clearing-qty</code> Clearing quantities <code>dam-block-bid</code> Block bid information"},{"location":"user-guide/api-calls/#intraday-market-gip","title":"Intraday Market (G\u0130P)","text":"Call Key Description <code>idm-summary</code> Intraday market summary <code>idm-contract</code> Contract information <code>idm-order-history</code> Order book history"},{"location":"user-guide/api-calls/#balancing-power-market-dgp","title":"Balancing Power Market (DGP)","text":"Call Key Description <code>bpm-orders</code> Balancing power market orders <code>bpm-instruction</code> Balancing instructions <code>yal</code> Up regulation (Y\u00fck Alma) <code>yat</code> Down regulation (Y\u00fck Atma)"},{"location":"user-guide/api-calls/#organization-data","title":"Organization Data","text":"Call Key Description <code>organizations</code> List of market participants <code>dso-list</code> Distribution system operators <code>metering-point-list</code> Metering points <pre><code># Get list of organizations\norgs = eptr.call(\"organizations\")\n</code></pre>"},{"location":"user-guide/api-calls/#bilateral-contracts","title":"Bilateral Contracts","text":"Call Key Description <code>bilateral-contracts</code> Aggregate bilateral contracts <code>bilateral-contracts-org</code> Contracts by organization"},{"location":"user-guide/api-calls/#ancillary-services","title":"Ancillary Services","text":"Call Key Description <code>primary-freq-cap</code> Primary frequency capacity <code>secondary-freq-cap</code> Secondary frequency capacity <code>pfc-price</code> Primary frequency capacity price <code>sfc-price</code> Secondary frequency capacity price"},{"location":"user-guide/api-calls/#discovering-all-calls","title":"Discovering All Calls","text":""},{"location":"user-guide/api-calls/#list-all-available-calls","title":"List All Available Calls","text":"<pre><code>all_calls = eptr.get_available_calls()\nprint(f\"Total: {len(all_calls)} calls\")\n\nfor call in sorted(all_calls):\n    print(f\"  - {call}\")\n</code></pre>"},{"location":"user-guide/api-calls/#search-for-calls","title":"Search for Calls","text":"<pre><code># Find all price-related calls\nprice_calls = [c for c in eptr.get_available_calls() if 'price' in c.lower()]\n\n# Find all generation calls\ngen_calls = [c for c in eptr.get_available_calls() if 'gen' in c.lower()]\n</code></pre>"},{"location":"user-guide/api-calls/#get-call-documentation","title":"Get Call Documentation","text":"<pre><code>from eptr2.mapping.help import get_help_d\n\n# Get help for a specific call\nhelp_info = get_help_d(\"mcp\")\nprint(f\"Category: {help_info['category']}\")\nprint(f\"Title: {help_info['title']['en']}\")\nprint(f\"Description: {help_info['desc']['en']}\")\n</code></pre>"},{"location":"user-guide/api-calls/#call-parameters","title":"Call Parameters","text":"<p>Most calls require at minimum:</p> <ul> <li><code>start_date</code> - Start date in YYYY-MM-DD format</li> <li><code>end_date</code> - End date in YYYY-MM-DD format</li> </ul> <p>Some calls require additional parameters:</p> <pre><code># Organization-specific calls\ndf = eptr.call(\"bilateral-contracts-org\", \n               start_date=\"2024-07-29\", \n               end_date=\"2024-07-29\",\n               org_id=123)\n\n# Power plant-specific calls  \ndf = eptr.call(\"rt-gen\",\n               start_date=\"2024-07-29\",\n               end_date=\"2024-07-29\", \n               pp_id=456)\n\n# UEVCB (production unit) calls\ndf = eptr.call(\"uevcb-data\",\n               start_date=\"2024-07-29\",\n               end_date=\"2024-07-29\",\n               uevcb_id=789)\n</code></pre>"},{"location":"user-guide/api-calls/#next-steps","title":"Next Steps","text":"<ul> <li>Composite Functions - Pre-built analysis functions</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"user-guide/basic-usage/","title":"Basic Usage","text":"<p>This guide covers the fundamental patterns for using eptr2.</p>"},{"location":"user-guide/basic-usage/#the-eptr2-class","title":"The EPTR2 Class","text":"<p>The <code>EPTR2</code> class is your main interface to the EPIAS Transparency Platform:</p> <pre><code>from eptr2 import EPTR2\n\neptr = EPTR2(\n    use_dotenv=True,      # Load credentials from .env\n    recycle_tgt=True,     # Reuse authentication tickets\n    dotenv_path=\".env\",   # Path to .env file\n)\n</code></pre>"},{"location":"user-guide/basic-usage/#making-api-calls","title":"Making API Calls","text":""},{"location":"user-guide/basic-usage/#the-call-method","title":"The <code>call</code> Method","text":"<p>The primary method for fetching data:</p> <pre><code>result = eptr.call(\n    key=\"mcp\",                    # API endpoint name\n    start_date=\"2024-07-29\",      # Start date (YYYY-MM-DD)\n    end_date=\"2024-07-29\",        # End date (YYYY-MM-DD)\n    postprocess=True,             # Return DataFrame (default)\n    request_kwargs={\"timeout\": 10} # Optional request settings\n)\n</code></pre>"},{"location":"user-guide/basic-usage/#call-aliases","title":"Call Aliases","text":"<p>Many endpoints have multiple names (aliases):</p> <pre><code># These are equivalent\ndf1 = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\ndf2 = eptr.call(\"ptf\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# SMP/SMF aliases\ndf3 = eptr.call(\"smp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\ndf4 = eptr.call(\"smf\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"user-guide/basic-usage/#view-available-aliases","title":"View Available Aliases","text":"<pre><code>aliases = eptr.get_aliases()\nprint(aliases)\n</code></pre>"},{"location":"user-guide/basic-usage/#discovery-methods","title":"Discovery Methods","text":""},{"location":"user-guide/basic-usage/#list-all-available-calls","title":"List All Available Calls","text":"<pre><code># Get all available API call keys\nall_calls = eptr.get_available_calls()\nprint(f\"Total: {len(all_calls)} calls available\")\n\n# Print first 20\nfor call in all_calls[:20]:\n    print(f\"  - {call}\")\n</code></pre>"},{"location":"user-guide/basic-usage/#get-call-count","title":"Get Call Count","text":"<pre><code>count = eptr.get_number_of_calls()\nprint(f\"Number of available calls: {count}\")\n</code></pre>"},{"location":"user-guide/basic-usage/#get-help-for-a-call","title":"Get Help for a Call","text":"<pre><code>from eptr2.mapping.help import get_help_d\n\n# Get help for MCP endpoint\nhelp_info = get_help_d(\"mcp\")\nprint(f\"Category: {help_info['category']}\")\nprint(f\"Title (EN): {help_info['title']['en']}\")\nprint(f\"Description: {help_info['desc']['en']}\")\n</code></pre>"},{"location":"user-guide/basic-usage/#parameters-by-endpoint","title":"Parameters by Endpoint","text":"<p>Different endpoints require different parameters:</p>"},{"location":"user-guide/basic-usage/#date-based-endpoints","title":"Date-Based Endpoints","text":"<p>Most endpoints just need dates:</p> <pre><code># Market prices\ndf = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Consumption data\ndf = eptr.call(\"rt-cons\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"user-guide/basic-usage/#organization-based-endpoints","title":"Organization-Based Endpoints","text":"<p>Some endpoints require organization IDs:</p> <pre><code># Get organization list first\norgs = eptr.call(\"organizations\")\n\n# Then query for specific organization\ndf = eptr.call(\n    \"bilateral-contracts-org\",\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    org_id=123  # Organization ID\n)\n</code></pre>"},{"location":"user-guide/basic-usage/#power-plant-based-endpoints","title":"Power Plant-Based Endpoints","text":"<p>For plant-level data:</p> <pre><code># Get power plant list\nplants = eptr.call(\"dpp-pp-list\")\n\n# Query for specific plant\ndf = eptr.call(\n    \"rt-gen\",\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    pp_id=456  # Power plant ID\n)\n</code></pre>"},{"location":"user-guide/basic-usage/#response-handling","title":"Response Handling","text":""},{"location":"user-guide/basic-usage/#dataframe-output-default","title":"DataFrame Output (Default)","text":"<pre><code>df = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n\n# Standard pandas operations\nprint(df.head())\nprint(df.describe())\nprint(df.columns)\n</code></pre>"},{"location":"user-guide/basic-usage/#raw-json-output","title":"Raw JSON Output","text":"<pre><code>raw = eptr.call(\n    \"mcp\",\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    postprocess=False\n)\nprint(type(raw))  # dict\nprint(raw.keys())\n</code></pre>"},{"location":"user-guide/basic-usage/#raw-http-response","title":"Raw HTTP Response","text":"<pre><code>eptr_raw = EPTR2(use_dotenv=True, get_raw_response=True)\nresponse = eptr_raw.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\nprint(response.status)\nprint(response.data)\n</code></pre>"},{"location":"user-guide/basic-usage/#request-configuration","title":"Request Configuration","text":""},{"location":"user-guide/basic-usage/#timeout-settings","title":"Timeout Settings","text":"<pre><code>df = eptr.call(\n    \"mcp\",\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    request_kwargs={\"timeout\": 30}  # 30 second timeout\n)\n</code></pre>"},{"location":"user-guide/basic-usage/#ssl-verification","title":"SSL Verification","text":"<pre><code># Disable SSL verification (not recommended for production)\neptr = EPTR2(use_dotenv=True, ssl_verify=False)\n</code></pre>"},{"location":"user-guide/basic-usage/#working-with-date-ranges","title":"Working with Date Ranges","text":""},{"location":"user-guide/basic-usage/#single-day","title":"Single Day","text":"<pre><code>df = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\n</code></pre>"},{"location":"user-guide/basic-usage/#date-range","title":"Date Range","text":"<pre><code>df = eptr.call(\"mcp\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\n</code></pre>"},{"location":"user-guide/basic-usage/#using-python-dates","title":"Using Python Dates","text":"<pre><code>from datetime import datetime, timedelta\n\ntoday = datetime.now()\nyesterday = today - timedelta(days=1)\n\ndf = eptr.call(\n    \"mcp\",\n    start_date=yesterday.strftime(\"%Y-%m-%d\"),\n    end_date=yesterday.strftime(\"%Y-%m-%d\")\n)\n</code></pre>"},{"location":"user-guide/basic-usage/#error-handling","title":"Error Handling","text":"<pre><code>from eptr2 import EPTR2\n\neptr = EPTR2(use_dotenv=True)\n\ntry:\n    df = eptr.call(\"mcp\", start_date=\"2024-07-29\", end_date=\"2024-07-29\")\nexcept Exception as e:\n    print(f\"API Error: {e}\")\n</code></pre>"},{"location":"user-guide/basic-usage/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Use TGT recycling - Reduces authentication overhead:    <pre><code>eptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n</code></pre></p> </li> <li> <p>Set appropriate timeouts - Avoid hanging requests:    <pre><code>df = eptr.call(\"mcp\", ..., request_kwargs={\"timeout\": 10})\n</code></pre></p> </li> <li> <p>Handle empty responses - Check DataFrame before processing:    <pre><code>df = eptr.call(\"mcp\", ...)\nif df.empty:\n    print(\"No data returned\")\n</code></pre></p> </li> <li> <p>Reuse EPTR2 instance - Create once, use multiple times:    <pre><code>eptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Multiple calls with same instance\nmcp = eptr.call(\"mcp\", ...)\nsmp = eptr.call(\"smp\", ...)\nconsumption = eptr.call(\"rt-cons\", ...)\n</code></pre></p> </li> </ol>"},{"location":"user-guide/basic-usage/#next-steps","title":"Next Steps","text":"<ul> <li>Available API Calls</li> <li>Composite Functions</li> <li>Working with DataFrames</li> </ul>"},{"location":"user-guide/composite-functions/","title":"Composite Functions","text":"<p>Composite functions combine multiple API calls to provide ready-to-use data for common analysis tasks. They save time by handling data fetching, merging, and transformation automatically.</p>"},{"location":"user-guide/composite-functions/#available-composite-functions","title":"Available Composite Functions","text":""},{"location":"user-guide/composite-functions/#consumption-and-forecast","title":"Consumption and Forecast","text":"<pre><code>from eptr2.composite import get_hourly_consumption_and_forecast_data\n\ndf = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre> <p>Returns a DataFrame with:</p> Column Description <code>dt</code> Datetime <code>load_plan</code> Load plan forecast <code>uecm</code> Settlement consumption (UE\u00c7M) <code>rt_cons</code> Real-time consumption <code>consumption</code> Best available consumption (UECM or RT)"},{"location":"user-guide/composite-functions/#price-and-cost-data","title":"Price and Cost Data","text":"<pre><code>from eptr2.composite import get_hourly_price_and_cost_data\n\ndf = get_hourly_price_and_cost_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre> <p>Returns comprehensive price data including MCP, SMP, and imbalance prices.</p>"},{"location":"user-guide/composite-functions/#production-data","title":"Production Data","text":"<pre><code>from eptr2.composite import get_hourly_production_data\n\ndf = get_hourly_production_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#production-plan-data","title":"Production Plan Data","text":"<pre><code>from eptr2.composite import get_hourly_production_plan_data\n\ndf = get_hourly_production_plan_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#imbalance-data","title":"Imbalance Data","text":"<pre><code>from eptr2.composite import get_imbalance_data\n\ndf = get_imbalance_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\"\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#using-with-custom-eptr2-instance","title":"Using with Custom EPTR2 Instance","text":"<p>All composite functions accept an optional <code>eptr</code> parameter:</p> <pre><code>from eptr2 import EPTR2\nfrom eptr2.composite import get_hourly_consumption_and_forecast_data\n\n# Create your own EPTR2 instance\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Pass it to the composite function\ndf = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    eptr=eptr\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#verbose-mode","title":"Verbose Mode","text":"<p>Enable verbose mode to see progress:</p> <pre><code>df = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    verbose=True\n)\n</code></pre> <p>Output: <pre><code>Loading load plan...\nLoading UECM...\nLoading real time consumption...\n</code></pre></p>"},{"location":"user-guide/composite-functions/#including-contract-symbols","title":"Including Contract Symbols","text":"<p>Add contract symbols for easier identification:</p> <pre><code>df = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    include_contract_symbol=True\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#example-complete-analysis","title":"Example: Complete Analysis","text":"<p>Combine consumption and price data for cost analysis:</p> <pre><code>from eptr2 import EPTR2\nfrom eptr2.composite import (\n    get_hourly_consumption_and_forecast_data,\n    get_hourly_price_and_cost_data\n)\nimport pandas as pd\n\n# Initialize\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Get consumption data\nconsumption_df = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    eptr=eptr\n)\n\n# Get price data\nprice_df = get_hourly_price_and_cost_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    eptr=eptr\n)\n\n# Merge for analysis\nanalysis = pd.merge(\n    consumption_df,\n    price_df,\n    on=['dt'],\n    how='inner'\n)\n\n# Calculate total cost\nanalysis['total_cost'] = analysis['consumption'] * analysis['mcp']\nprint(f\"Total cost: {analysis['total_cost'].sum():,.2f} TL\")\n</code></pre>"},{"location":"user-guide/composite-functions/#plant-cost-analysis","title":"Plant Cost Analysis","text":"<pre><code>from eptr2.composite import calculate_plant_costs\n\ncosts = calculate_plant_costs(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    pp_id=123,  # Power plant ID\n    eptr=eptr\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#idm-intraday-market-log","title":"IDM (Intraday Market) Log","text":"<pre><code>from eptr2.composite import get_idm_log_data\n\nidm_log = get_idm_log_data(\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    eptr=eptr\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#mms-market-management-system-data","title":"MMS (Market Management System) Data","text":"<pre><code>from eptr2.composite import get_mms_data\n\nmms = get_mms_data(\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    eptr=eptr\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#bpm-balancing-power-market-data","title":"BPM (Balancing Power Market) Data","text":"<pre><code>from eptr2.composite import get_bpm_data\n\nbpm = get_bpm_data(\n    start_date=\"2024-07-29\",\n    end_date=\"2024-07-29\",\n    eptr=eptr\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#organization-periodic-data","title":"Organization Periodic Data","text":"<pre><code>from eptr2.composite import get_periodic_org_data\n\norg_data = get_periodic_org_data(\n    start_date=\"2024-07-01\",\n    end_date=\"2024-07-31\",\n    org_id=123,\n    eptr=eptr\n)\n</code></pre>"},{"location":"user-guide/composite-functions/#function-signatures","title":"Function Signatures","text":"<p>All composite functions share a similar signature:</p> <pre><code>def composite_function(\n    start_date: str,           # YYYY-MM-DD format\n    end_date: str,             # YYYY-MM-DD format\n    eptr: EPTR2 | None = None, # Optional EPTR2 instance\n    verbose: bool = False,     # Print progress\n    **kwargs                   # Additional parameters\n) -&gt; pd.DataFrame:\n    ...\n</code></pre>"},{"location":"user-guide/composite-functions/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Reuse EPTR2 instance - Pass the same instance to multiple composite calls:    <pre><code>eptr = EPTR2(use_dotenv=True, recycle_tgt=True)\ndf1 = get_hourly_consumption_and_forecast_data(..., eptr=eptr)\ndf2 = get_hourly_price_and_cost_data(..., eptr=eptr)\n</code></pre></p> </li> <li> <p>Use reasonable date ranges - Large date ranges may be slow:    <pre><code># Good: 1 month\ndf = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-07-01\", end_date=\"2024-07-31\", ...\n)\n\n# May be slow: 1 year\ndf = get_hourly_consumption_and_forecast_data(\n    start_date=\"2024-01-01\", end_date=\"2024-12-31\", ...\n)\n</code></pre></p> </li> <li> <p>Enable verbose for debugging - See what's being loaded:    <pre><code>df = get_hourly_consumption_and_forecast_data(..., verbose=True)\n</code></pre></p> </li> </ol>"},{"location":"user-guide/composite-functions/#next-steps","title":"Next Steps","text":"<ul> <li>Working with DataFrames</li> <li>API Reference - Composite</li> </ul>"},{"location":"user-guide/dataframes/","title":"Working with DataFrames","text":"<p>eptr2 returns pandas DataFrames by default, making it easy to analyze and visualize Turkish electricity market data.</p>"},{"location":"user-guide/dataframes/#basic-dataframe-operations","title":"Basic DataFrame Operations","text":""},{"location":"user-guide/dataframes/#fetching-data","title":"Fetching Data","text":"<pre><code>from eptr2 import EPTR2\n\neptr = EPTR2(use_dotenv=True, recycle_tgt=True)\n\n# Get Market Clearing Price\ndf = eptr.call(\"mcp\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\n</code></pre>"},{"location":"user-guide/dataframes/#exploring-the-data","title":"Exploring the Data","text":"<pre><code># View first rows\nprint(df.head())\n\n# Check columns\nprint(df.columns.tolist())\n\n# Data types\nprint(df.dtypes)\n\n# Summary statistics\nprint(df.describe())\n\n# Shape\nprint(f\"Rows: {len(df)}, Columns: {len(df.columns)}\")\n</code></pre>"},{"location":"user-guide/dataframes/#common-column-names","title":"Common Column Names","text":"<p>Different API calls return different columns. Here are common patterns:</p>"},{"location":"user-guide/dataframes/#price-data","title":"Price Data","text":"Column Description <code>date</code> Timestamp <code>price</code> Price in TL/MWh <code>positiveImbalancePrice</code> Positive imbalance price <code>negativeImbalancePrice</code> Negative imbalance price"},{"location":"user-guide/dataframes/#consumption-data","title":"Consumption Data","text":"Column Description <code>date</code> / <code>period</code> Timestamp <code>consumption</code> Consumption in MWh <code>swv</code> Settlement value (UECM) <code>lep</code> Load plan forecast"},{"location":"user-guide/dataframes/#generation-data","title":"Generation Data","text":"Column Description <code>date</code> Timestamp <code>total</code> Total generation <code>wind</code> Wind generation <code>solar</code> Solar generation <code>hydro</code> Hydro generation <code>naturalGas</code> Natural gas generation"},{"location":"user-guide/dataframes/#datetime-handling","title":"Datetime Handling","text":""},{"location":"user-guide/dataframes/#convert-to-datetime","title":"Convert to Datetime","text":"<pre><code># Convert string dates to datetime\ndf['date'] = pd.to_datetime(df['date'])\n\n# Set as index\ndf = df.set_index('date')\n</code></pre>"},{"location":"user-guide/dataframes/#extract-components","title":"Extract Components","text":"<pre><code>df['hour'] = df['date'].dt.hour\ndf['day'] = df['date'].dt.day\ndf['month'] = df['date'].dt.month\ndf['weekday'] = df['date'].dt.dayofweek\ndf['is_weekend'] = df['weekday'].isin([5, 6])\n</code></pre>"},{"location":"user-guide/dataframes/#timezone-handling","title":"Timezone Handling","text":"<p>eptr2 data uses Turkey timezone (Europe/Istanbul, UTC+3):</p> <pre><code>import pytz\n\n# Ensure timezone awareness\ndf['date'] = pd.to_datetime(df['date']).dt.tz_localize('Europe/Istanbul')\n\n# Convert to UTC\ndf['date_utc'] = df['date'].dt.tz_convert('UTC')\n</code></pre>"},{"location":"user-guide/dataframes/#filtering-and-selecting","title":"Filtering and Selecting","text":""},{"location":"user-guide/dataframes/#by-date-range","title":"By Date Range","text":"<pre><code># Filter by date\nmask = (df['date'] &gt;= '2024-07-15') &amp; (df['date'] &lt;= '2024-07-20')\nfiltered = df.loc[mask]\n</code></pre>"},{"location":"user-guide/dataframes/#by-time","title":"By Time","text":"<pre><code># Peak hours (08:00-20:00)\ndf['hour'] = df['date'].dt.hour\npeak_hours = df[(df['hour'] &gt;= 8) &amp; (df['hour'] &lt; 20)]\n\n# Off-peak hours\noff_peak = df[(df['hour'] &lt; 8) | (df['hour'] &gt;= 20)]\n</code></pre>"},{"location":"user-guide/dataframes/#by-value","title":"By Value","text":"<pre><code># High price periods\nhigh_price = df[df['price'] &gt; df['price'].quantile(0.9)]\n\n# Specific values\nspecific = df[df['price'] == 1500.00]\n</code></pre>"},{"location":"user-guide/dataframes/#aggregations","title":"Aggregations","text":""},{"location":"user-guide/dataframes/#daily-aggregations","title":"Daily Aggregations","text":"<pre><code># Set date index\ndf['date'] = pd.to_datetime(df['date'])\ndf = df.set_index('date')\n\n# Daily statistics\ndaily = df.resample('D').agg({\n    'price': ['mean', 'min', 'max', 'std'],\n    'consumption': 'sum'\n})\n</code></pre>"},{"location":"user-guide/dataframes/#hourly-patterns","title":"Hourly Patterns","text":"<pre><code># Average price by hour\nhourly_avg = df.groupby(df['date'].dt.hour)['price'].mean()\n</code></pre>"},{"location":"user-guide/dataframes/#monthly-summary","title":"Monthly Summary","text":"<pre><code>monthly = df.resample('M').agg({\n    'price': 'mean',\n    'consumption': 'sum'\n})\n</code></pre>"},{"location":"user-guide/dataframes/#merging-data","title":"Merging Data","text":""},{"location":"user-guide/dataframes/#merge-price-and-consumption","title":"Merge Price and Consumption","text":"<pre><code># Get both datasets\nmcp = eptr.call(\"mcp\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\ncons = eptr.call(\"rt-cons\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\n\n# Rename columns for clarity\nmcp = mcp.rename(columns={'date': 'datetime', 'price': 'mcp_price'})\ncons = cons.rename(columns={'date': 'datetime'})\n\n# Merge on datetime\nmerged = pd.merge(mcp, cons, on='datetime', how='inner')\n</code></pre>"},{"location":"user-guide/dataframes/#merge-multiple-price-types","title":"Merge Multiple Price Types","text":"<pre><code>mcp = eptr.call(\"mcp\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\nsmp = eptr.call(\"smp\", start_date=\"2024-07-01\", end_date=\"2024-07-31\")\n\nmcp = mcp[['date', 'price']].rename(columns={'price': 'mcp'})\nsmp = smp[['date', 'price']].rename(columns={'price': 'smp'})\n\nprices = pd.merge(mcp, smp, on='date')\nprices['spread'] = prices['mcp'] - prices['smp']\n</code></pre>"},{"location":"user-guide/dataframes/#calculations","title":"Calculations","text":""},{"location":"user-guide/dataframes/#cost-calculation","title":"Cost Calculation","text":"<pre><code># Simple cost\ndf['cost'] = df['consumption'] * df['price']\n\n# Total cost\ntotal_cost = df['cost'].sum()\nprint(f\"Total cost: {total_cost:,.2f} TL\")\n</code></pre>"},{"location":"user-guide/dataframes/#rolling-statistics","title":"Rolling Statistics","text":"<pre><code># 24-hour rolling average\ndf['price_24h_avg'] = df['price'].rolling(24).mean()\n\n# 7-day rolling average (168 hours)\ndf['price_7d_avg'] = df['price'].rolling(168).mean()\n</code></pre>"},{"location":"user-guide/dataframes/#percent-change","title":"Percent Change","text":"<pre><code># Hour-over-hour change\ndf['price_change'] = df['price'].pct_change()\n\n# Day-over-day change (24 hours)\ndf['price_daily_change'] = df['price'].pct_change(24)\n</code></pre>"},{"location":"user-guide/dataframes/#visualization","title":"Visualization","text":""},{"location":"user-guide/dataframes/#basic-plotting","title":"Basic Plotting","text":"<pre><code>import matplotlib.pyplot as plt\n\n# Price over time\ndf.plot(x='date', y='price', figsize=(12, 6))\nplt.title('Market Clearing Price')\nplt.xlabel('Date')\nplt.ylabel('Price (TL/MWh)')\nplt.show()\n</code></pre>"},{"location":"user-guide/dataframes/#distribution","title":"Distribution","text":"<pre><code># Price histogram\ndf['price'].hist(bins=50, figsize=(10, 6))\nplt.title('Price Distribution')\nplt.xlabel('Price (TL/MWh)')\nplt.ylabel('Frequency')\nplt.show()\n</code></pre>"},{"location":"user-guide/dataframes/#hourly-pattern","title":"Hourly Pattern","text":"<pre><code># Average price by hour\nhourly = df.groupby(df['date'].dt.hour)['price'].mean()\nhourly.plot(kind='bar', figsize=(12, 6))\nplt.title('Average Price by Hour')\nplt.xlabel('Hour')\nplt.ylabel('Price (TL/MWh)')\nplt.show()\n</code></pre>"},{"location":"user-guide/dataframes/#export-options","title":"Export Options","text":""},{"location":"user-guide/dataframes/#to-csv","title":"To CSV","text":"<pre><code>df.to_csv('electricity_data.csv', index=False)\n</code></pre>"},{"location":"user-guide/dataframes/#to-excel","title":"To Excel","text":"<pre><code>df.to_excel('electricity_data.xlsx', index=False)\n</code></pre>"},{"location":"user-guide/dataframes/#to-json","title":"To JSON","text":"<pre><code>df.to_json('electricity_data.json', orient='records', date_format='iso')\n</code></pre>"},{"location":"user-guide/dataframes/#to-parquet","title":"To Parquet","text":"<pre><code>df.to_parquet('electricity_data.parquet', index=False)\n</code></pre>"},{"location":"user-guide/dataframes/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Convert dates early:    <pre><code>df['date'] = pd.to_datetime(df['date'])\n</code></pre></p> </li> <li> <p>Use appropriate index:    <pre><code>df = df.set_index('date').sort_index()\n</code></pre></p> </li> <li> <p>Handle missing data:    <pre><code># Check for missing\nprint(df.isnull().sum())\n\n# Fill or drop\ndf = df.fillna(method='ffill')  # Forward fill\n</code></pre></p> </li> <li> <p>Use efficient dtypes:    <pre><code># Convert to appropriate types\ndf['price'] = df['price'].astype('float32')\ndf['hour'] = df['hour'].astype('int8')\n</code></pre></p> </li> </ol>"},{"location":"user-guide/dataframes/#next-steps","title":"Next Steps","text":"<ul> <li>API Reference</li> <li>Composite Functions</li> </ul>"}]}